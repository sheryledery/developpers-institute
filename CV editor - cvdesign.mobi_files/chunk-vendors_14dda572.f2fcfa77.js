(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~14dda572"],{"0937":function(t,e,n){"use strict";function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}n.d(e,"a",(function(){return an}));var i=r((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),o=r((function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)})),u=(o.version,function(t){return"object"===typeof t?null!==t:"function"===typeof t}),a=function(t){if(!u(t))throw TypeError(t+" is not an object!");return t},s=function(t){try{return!!t()}catch(e){return!0}},c=!s((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),h=i.document,f=u(h)&&u(h.createElement),l=function(t){return f?h.createElement(t):{}},d=!c&&!s((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a})),p=function(t,e){if(!u(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!u(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!u(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!u(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},y=Object.defineProperty,v=c?Object.defineProperty:function(t,e,n){if(a(t),e=p(e,!0),a(n),d)try{return y(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t},m={f:v},g=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b=c?function(t,e,n){return m.f(t,e,g(1,n))}:function(t,e,n){return t[e]=n,t},w={}.hasOwnProperty,K=function(t,e){return w.call(t,e)},O=0,R=Math.random(),k=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++O+R).toString(36))},I=r((function(t){var e="__core-js_shared__",n=i[e]||(i[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:o.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),M=I("native-function-to-string",Function.toString),$=r((function(t){var e=k("src"),n="toString",r=(""+M).split(n);o.inspectSource=function(t){return M.call(t)},(t.exports=function(t,n,o,u){var a="function"==typeof o;a&&(K(o,"name")||b(o,"name",n)),t[n]!==o&&(a&&(K(o,e)||b(o,e,t[n]?""+t[n]:r.join(String(n)))),t===i?t[n]=o:u?t[n]?t[n]=o:b(t,n,o):(delete t[n],b(t,n,o)))})(Function.prototype,n,(function(){return"function"==typeof this&&this[e]||M.call(this)}))})),F=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},S=function(t,e,n){if(F(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},E="prototype",A=function(t,e,n){var r,u,a,s,c=t&A.F,h=t&A.G,f=t&A.S,l=t&A.P,d=t&A.B,p=h?i:f?i[e]||(i[e]={}):(i[e]||{})[E],y=h?o:o[e]||(o[e]={}),v=y[E]||(y[E]={});for(r in h&&(n=e),n)u=!c&&p&&void 0!==p[r],a=(u?p:n)[r],s=d&&u?S(a,i):l&&"function"==typeof a?S(Function.call,a):a,p&&$(p,r,a,t&A.U),y[r]!=a&&b(y,r,s),l&&v[r]!=a&&(v[r]=a)};i.core=o,A.F=1,A.G=2,A.S=4,A.P=8,A.B=16,A.W=32,A.U=64,A.R=128;var x=A,j={}.toString,P=function(t){return j.call(t).slice(8,-1)},C=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==P(t)?t.split(""):Object(t)},_=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},B=function(t){return C(_(t))},T=Math.ceil,H=Math.floor,z=function(t){return isNaN(t=+t)?0:(t>0?H:T)(t)},U=Math.min,N=function(t){return t>0?U(z(t),9007199254740991):0},V=Math.max,D=Math.min,W=function(t,e){return t=z(t),t<0?V(t+e,0):D(t,e)},L=function(t){return function(e,n,r){var i,o=B(e),u=N(o.length),a=W(r,u);if(t&&n!=n){while(u>a)if(i=o[a++],i!=i)return!0}else for(;u>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},G=r((function(t){var e=I("wks"),n=i.Symbol,r="function"==typeof n,o=t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:k)("Symbol."+t))};o.store=e})),J=G("unscopables"),Q=Array.prototype;void 0==Q[J]&&b(Q,J,{});var q=function(t){Q[J][t]=!0},Y=L(!0);x(x.P,"Array",{includes:function(t){return Y(this,t,arguments.length>1?arguments[1]:void 0)}}),q("includes");o.Array.includes;var X=I("keys"),Z=function(t){return X[t]||(X[t]=k(t))},tt=L(!1),et=Z("IE_PROTO"),nt=function(t,e){var n,r=B(t),i=0,o=[];for(n in r)n!=et&&K(r,n)&&o.push(n);while(e.length>i)K(r,n=e[i++])&&(~tt(o,n)||o.push(n));return o},rt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),it=Object.keys||function(t){return nt(t,rt)},ot=Object.getOwnPropertySymbols,ut={f:ot},at={}.propertyIsEnumerable,st={f:at},ct=function(t){return Object(_(t))},ht=Object.assign,ft=!ht||s((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=ht({},t)[n]||Object.keys(ht({},e)).join("")!=r}))?function(t,e){var n=ct(t),r=arguments.length,i=1,o=ut.f,u=st.f;while(r>i){var a,s=C(arguments[i++]),h=o?it(s).concat(o(s)):it(s),f=h.length,l=0;while(f>l)a=h[l++],c&&!u.call(s,a)||(n[a]=s[a])}return n}:ht;x(x.S+x.F,"Object",{assign:ft});o.Object.assign;var lt=st.f,dt=function(t){return function(e){var n,r=B(e),i=it(r),o=i.length,u=0,a=[];while(o>u)n=i[u++],c&&!lt.call(r,n)||a.push(t?[n,r[n]]:r[n]);return a}},pt=dt(!0);x(x.S,"Object",{entries:function(t){return pt(t)}});o.Object.entries;var yt=dt(!1);x(x.S,"Object",{values:function(t){return yt(t)}});o.Object.values;var vt=G("match"),mt=function(t){var e;return u(t)&&(void 0!==(e=t[vt])?!!e:"RegExp"==P(t))},gt=function(t,e,n){if(mt(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(_(t))},bt=G("match"),wt=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[bt]=!1,!"/./"[t](e)}catch(v){}}return!0},Kt="startsWith",Ot=""[Kt];x(x.P+x.F*wt(Kt),"String",{startsWith:function(t){var e=gt(this,t,Kt),n=N(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Ot?Ot.call(e,r,n):e.slice(n,n+r.length)===r}});o.String.startsWith;var Rt=function(t){return function(e,n){var r,i,o=String(_(e)),u=z(n),a=o.length;return u<0||u>=a?t?"":void 0:(r=o.charCodeAt(u),r<55296||r>56319||u+1===a||(i=o.charCodeAt(u+1))<56320||i>57343?t?o.charAt(u):r:t?o.slice(u,u+2):i-56320+(r-55296<<10)+65536)}},kt={},It=c?Object.defineProperties:function(t,e){a(t);var n,r=it(e),i=r.length,o=0;while(i>o)m.f(t,n=r[o++],e[n]);return t},Mt=i.document,$t=Mt&&Mt.documentElement,Ft=Z("IE_PROTO"),St=function(){},Et="prototype",At=function(){var t,e=l("iframe"),n=rt.length,r="<",i=">";e.style.display="none",$t.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+i+"document.F=Object"+r+"/script"+i),t.close(),At=t.F;while(n--)delete At[Et][rt[n]];return At()},xt=Object.create||function(t,e){var n;return null!==t?(St[Et]=a(t),n=new St,St[Et]=null,n[Ft]=t):n=At(),void 0===e?n:It(n,e)},jt=m.f,Pt=G("toStringTag"),Ct=function(t,e,n){t&&!K(t=n?t:t.prototype,Pt)&&jt(t,Pt,{configurable:!0,value:e})},_t={};b(_t,G("iterator"),(function(){return this}));var Bt=function(t,e,n){t.prototype=xt(_t,{next:g(1,n)}),Ct(t,e+" Iterator")},Tt=Z("IE_PROTO"),Ht=Object.prototype,zt=Object.getPrototypeOf||function(t){return t=ct(t),K(t,Tt)?t[Tt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ht:null},Ut=G("iterator"),Nt=!([].keys&&"next"in[].keys()),Vt="@@iterator",Dt="keys",Wt="values",Lt=function(){return this},Gt=function(t,e,n,r,i,o,u){Bt(n,e,r);var a,s,c,h=function(t){if(!Nt&&t in p)return p[t];switch(t){case Dt:return function(){return new n(this,t)};case Wt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",l=i==Wt,d=!1,p=t.prototype,y=p[Ut]||p[Vt]||i&&p[i],v=y||h(i),m=i?l?h("entries"):v:void 0,g="Array"==e&&p.entries||y;if(g&&(c=zt(g.call(new t)),c!==Object.prototype&&c.next&&(Ct(c,f,!0),"function"!=typeof c[Ut]&&b(c,Ut,Lt))),l&&y&&y.name!==Wt&&(d=!0,v=function(){return y.call(this)}),(Nt||d||!p[Ut])&&b(p,Ut,v),kt[e]=v,kt[f]=Lt,i)if(a={values:l?v:h(Wt),keys:o?v:h(Dt),entries:m},u)for(s in a)s in p||$(p,s,a[s]);else x(x.P+x.F*(Nt||d),e,a);return a},Jt=Rt(!0);Gt(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Jt(e,n),this._i+=t.length,{value:t,done:!1})}));var Qt=function(t,e,n,r){try{return r?e(a(n)[0],n[1]):e(n)}catch(o){var i=t["return"];throw void 0!==i&&a(i.call(t)),o}},qt=G("iterator"),Yt=Array.prototype,Xt=function(t){return void 0!==t&&(kt.Array===t||Yt[qt]===t)},Zt=function(t,e,n){e in t?m.f(t,e,g(0,n)):t[e]=n},te=G("toStringTag"),ee="Arguments"==P(function(){return arguments}()),ne=function(t,e){try{return t[e]}catch(n){}},re=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=ne(e=Object(t),te))?n:ee?P(e):"Object"==(r=P(e))&&"function"==typeof e.callee?"Arguments":r},ie=G("iterator"),oe=o.getIteratorMethod=function(t){if(void 0!=t)return t[ie]||t["@@iterator"]||kt[re(t)]},ue=G("iterator"),ae=!1;try{var se=[7][ue]();se["return"]=function(){ae=!0},Array.from(se,(function(){throw 2}))}catch(Ir){}var ce=function(t,e){if(!e&&!ae)return!1;var n=!1;try{var r=[7],i=r[ue]();i.next=function(){return{done:n=!0}},r[ue]=function(){return i},t(r)}catch(Ir){}return n};x(x.S+x.F*!ce((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,i,o=ct(t),u="function"==typeof this?this:Array,a=arguments.length,s=a>1?arguments[1]:void 0,c=void 0!==s,h=0,f=oe(o);if(c&&(s=S(s,a>2?arguments[2]:void 0,2)),void 0==f||u==Array&&Xt(f))for(e=N(o.length),n=new u(e);e>h;h++)Zt(n,h,c?s(o[h],h):o[h]);else for(i=f.call(o),n=new u;!(r=i.next()).done;h++)Zt(n,h,c?Qt(i,s,[r.value,h],!0):r.value);return n.length=h,n}});o.Array.from;var he=function(){function t(){}return t.register=function(t){this.store=t},t}(),fe=function(t,e){void 0===e&&(e={});var n=e.namespace||"entities";return function(e){t.start(e,n),he.register(e)}},le=function(t,e){return le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},le(t,e)};function de(t,e){function n(){this.constructor=t}le(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var pe=function(){return pe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pe.apply(this,arguments)};function ye(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(Ir){o(Ir)}}function a(t){try{s(r["throw"](t))}catch(Ir){o(Ir)}}function s(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(u,a)}s((r=r.apply(t,e||[])).next())}))}function ve(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return s([t,e])}}function s(o){if(n)throw new TypeError("Generator is already executing.");while(u)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(Ir){o=[6,Ir],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function me(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],u=0,a=o.length;u<a;u++,i++)r[i]=o[u];return r}function ge(t){return Array.isArray(t)}function be(t){return ge(t)?t.length:Object.keys(t).length}function we(t){return 0===be(t)}function Ke(t,e){Object.keys(t).forEach((function(n){return e(t[n],n,t)}))}function Oe(t,e){var n=[];for(var r in t)n.push(e(t[r],r,t));return n}function Re(t,e){var n=Object.assign({},t);return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r,t),n}),n)}function ke(t,e){var n={};return t.forEach((function(t){n[t[e]]=t})),n}function Ie(t,e,n){var r=-1,i=t.map((function(t){var n=e.map((function(e){return"function"===typeof e?e(t):t[e]}));return{criteria:n,index:++r,value:t}}));return Me(i,(function(t,e){return $e(t,e,n)}))}function Me(t,e){var n=t.length;t.sort(e);var r=[];while(n--)r[n]=t[n].value;return r}function $e(t,e,n){var r=-1,i=t.criteria,o=e.criteria,u=i.length,a=n.length;while(++r<u){var s=Fe(i[r],o[r]);if(s){if(r>=a)return s;var c=n[r];return s*("desc"===c?-1:1)}}return t.index-e.index}function Fe(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t===t,o=void 0!==e,u=null===e,a=e===e;if("number"===typeof t&&"number"===typeof e||(t=String(t),e=String(e)),!u&&t>e||r&&o&&a||!n&&a||!i)return 1;if(!r&&t<e||u&&n&&i||!o&&i||!a)return-1}return 0}function Se(t,e){return t.reduce((function(t,n){var r=e(n);return void 0===t[r]&&(t[r]=[]),t[r].push(n),t}),{})}function Ee(t){if(null===t)return t;if(ge(t)){var e=[];return t.forEach((function(t){return e.push(t)})),e.map((function(t){return Ee(t)}))}if("object"===typeof t&&t!=={}){var n=pe({},t);return Object.keys(n).forEach((function(t){return n[t]=Ee(n[t])})),n}return t}var Ae={isArray:ge,size:be,isEmpty:we,forOwn:Ke,map:Oe,mapValues:Re,keyBy:ke,orderBy:Ie,groupBy:Se,cloneDeep:Ee},xe=function(){function t(){}return t.make=function(){return this.count++,""+this.prefix+this.count},t.reset=function(){this.count=0},t.count=0,t.prefix="$uid",t}(),je=function(){function t(t){this.model=t}return t}(),Pe=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.isNullable=!1,i.value=n,i.mutator=r,i}return de(e,t),e.prototype.nullable=function(){return this.isNullable=!0,this},e.prototype.mutate=function(t,e){var n=this.mutator||this.model.mutators()[e];return n?n(t):t},e}(je),Ce=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return de(e,t),e.prototype.make=function(t,e,n){t=void 0!==t?t:this.value;var r=t;return"function"===typeof t&&(r=t()),this.mutate(r,n)},e}(Pe),_e=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return de(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){return void 0===t?this.value:"string"===typeof t||null===t&&this.isNullable?t:t+""},e}(Pe),Be=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return de(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){return void 0===t?this.value:"number"===typeof t?t:"string"===typeof t?parseFloat(t):"boolean"===typeof t?t?1:0:null===t&&this.isNullable?t:0},e}(Pe),Te=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return de(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){if(void 0===t)return this.value;if("boolean"===typeof t)return t;if("string"===typeof t){if(0===t.length)return!1;var e=parseInt(t,0);return!!isNaN(e)||!!e}return"number"===typeof t?!!t:!(null!==t||!this.isNullable)&&t},e}(Pe),He=function(t){function e(e,n){return t.call(this,e,n)||this}return de(e,t),e.prototype.make=function(t){return"number"===typeof t||"string"===typeof t?t:"function"===typeof this.value?this.value():xe.make()},e}(Pe),ze=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return de(e,t),e.prototype.getRelation=function(t,e,n){var r=t.newQuery(e);return n.forEach((function(t){t(r)})),r},e.prototype.getKeys=function(t,e){return t.reduce((function(t,n){return null===n[e]||void 0===n[e]||t.push(n[e]),t}),[])},e.prototype.mapSingleRelations=function(t,e){var n=new Map;return t.forEach((function(t){var r=t[e];!n.get(r)&&n.set(r,t)})),n},e.prototype.mapManyRelations=function(t,e){var n=new Map;return t.forEach((function(t){var r=t[e],i=n.get(r);i||(i=[],n.set(r,i)),i.push(t)})),n},e.prototype.mapRelationsByOrders=function(t,e,n,r){var i={};return e.forEach((function(e,o){t.filter((function(t){return t[r]===o})).forEach((function(t){var r=t[n];i[r]||(i[r]=[]),i[r]=i[r].concat(e)}))})),i},e.prototype.isOneRelation=function(t){return!ge(t)&&null!==t&&"object"===typeof t},e.prototype.isManyRelation=function(t){return!!ge(t)&&!(t.length<1)},e.prototype.makeOneRelation=function(t,e){if(!this.isOneRelation(t))return null;var n=e.getModelFromRecord(t)||e;return new n(t)},e.prototype.makeManyRelation=function(t,e){var n=this;return this.isManyRelation(t)?t.filter((function(t){return n.isOneRelation(t)})).map((function(t){var n=e.getModelFromRecord(t)||e;return new n(t)})):[]},e}(je),Ue=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.related=o.model.relation(n),o.foreignKey=r,o.localKey=i,o}return de(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){e[this.localKey]||(e[this.localKey]=this.model.getIndexIdFromRecord(e));var r=n[this.related.entity]&&n[this.related.entity][t];r&&(r[this.foreignKey]=e[this.localKey])},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.related.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.localKey],o=i[e];t[n]=o||null}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){var r=n[e.foreignKey];return t[r]=n,t}),{})},e}(ze),Ne=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.parent=o.model.relation(n),o.foreignKey=r,o.ownerKey=i,o}return de(e,t),e.prototype.define=function(t){return t.one(this.parent)},e.prototype.attach=function(t,e,n){void 0===e[this.foreignKey]&&(e[this.foreignKey]=n[this.parent.entity]&&n[this.parent.entity][t]?n[this.parent.entity][t][this.ownerKey]:t)},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.parent)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.parent.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.ownerKey,this.getKeys(e,this.foreignKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.foreignKey],o=null!==e?i[e]:null;t[n]=o||null}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){var r=n[e.ownerKey];return t[r]=n,t}),{})},e}(ze),Ve=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.related=o.model.relation(n),o.foreignKey=r,o.localKey=i,o}return de(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this;t.forEach((function(t){var i=n[r.related.entity];i&&i[t]&&void 0===i[t][r.foreignKey]&&(i[t][r.foreignKey]=e[r.localKey])}))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.related.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.localKey],o=i[e];t[n]=o||[]}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){var r=n[e.foreignKey];return t[r]||(t[r]=[]),t[r].push(n),t}),{})},e}(ze),De=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.parent=o.model.relation(n),o.foreignKey=r,o.ownerKey=i,o}return de(e,t),e.prototype.define=function(t){return t.many(this.parent)},e.prototype.attach=function(t,e,n){var r=this;0!==t.length&&(e[this.foreignKey]=t.map((function(t){return r.parent.getIdFromRecord(n[r.parent.entity][t])})))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.parent)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.parent.entity,r);this.addConstraintForHasManyBy(o,e);var u=this.mapSingleRelations(o.get(),this.ownerKey);e.forEach((function(t){var e=i.getRelatedRecords(u,t[i.foreignKey]);t[n]=e}))},e.prototype.addConstraintForHasManyBy=function(t,e){var n=this,r=e.reduce((function(t,e){return t.concat(e[n.foreignKey])}),[]);t.where(this.ownerKey,r)},e.prototype.getRelatedRecords=function(t,e){var n=[];return t.forEach((function(t,r){-1!==e.indexOf(r)&&n.push(t)})),n},e}(ze),We=function(t){function e(e,n,r,i,o,u,a){var s=t.call(this,e)||this;return s.related=s.model.relation(n),s.through=s.model.relation(r),s.firstKey=i,s.secondKey=o,s.localKey=u,s.secondLocalKey=a,s}return de(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),u=t.newQuery(this.through.entity);this.addEagerConstraintForThrough(u,e);var a=u.get();this.addEagerConstraintForRelated(o,a);var s=this.mapThroughRelations(a,o);e.forEach((function(t){var e=s[t[i.localKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForThrough=function(t,e){t.where(this.firstKey,this.getKeys(e,this.localKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.where(this.secondKey,this.getKeys(e,this.secondLocalKey))},e.prototype.mapThroughRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.secondKey);return t.reduce((function(t,e){var i=e[n.firstKey];t[i]||(t[i]=[]);var o=r.get(e[n.secondLocalKey]);return void 0===o||(t[i]=t[i].concat(o)),t}),{})},e}(ze),Le=function(t){function e(e,n,r,i,o,u,a){var s=t.call(this,e)||this;return s.pivotKey="pivot",s.related=s.model.relation(n),s.pivot=s.model.relation(r),s.foreignPivotKey=i,s.relatedPivotKey=o,s.parentKey=u,s.relatedKey=a,s}return de(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),u=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(u,e);var a=u.get();this.addEagerConstraintForRelated(o,a);var s=this.mapPivotRelations(a,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e){t.whereFk(this.foreignPivotKey,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedPivotKey))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.foreignPivotKey,this.relatedPivotKey):t.reduce((function(t,e){var i=e[n.foreignPivotKey];t[i]||(t[i]=[]);var o=r.get(e[n.relatedPivotKey]);return o&&(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return Ae.isArray(this.pivot.primaryKey)?(Ae.forOwn(e[t.entity],(function(t){var i=t[n];void 0!==i&&0!==i.length&&r.createPivotRecord(e,t,i)})),e):e},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach((function(n){var i,o,u=e[r.parentKey],a=t[r.related.entity][n][r.relatedKey],s=JSON.stringify([r.pivot.primaryKey[0]===r.foreignPivotKey?u:a,r.pivot.primaryKey[1]===r.foreignPivotKey?u:a]),c=t[r.pivot.entity]?t[r.pivot.entity][s]:{},h=t[r.related.entity][n][r.pivotKey]||{};t[r.pivot.entity]=pe(pe({},t[r.pivot.entity]),(i={},i[s]=pe(pe(pe({},c),h),(o={$id:s},o[r.foreignPivotKey]=u,o[r.relatedPivotKey]=a,o)),i))}))},e}(ze),Ge=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.id=n,i.type=r,i}return de(e,t),e.prototype.define=function(t){var e=this;return t.union((function(t,n){return n[e.type]}))},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){var r=e[this.type];try{var i=this.model.relation(r);return this.makeOneRelation(t,i)}catch(o){return null}},e.prototype.load=function(t,e,n,r){var i=this,o=this.getTypes(e),u=o.reduce((function(e,n){var o=i.getRelation(t,n,r);return e[n]=i.mapSingleRelations(o.get(),"$id"),e}),{});e.forEach((function(t){var e=t[i.id],r=t[i.type],o=u[r].get(String(e));t[n]=o||null}))},e.prototype.getTypes=function(t){var e=this;return t.reduce((function(t,n){var r=n[e.type];return!t.includes(r)&&t.push(r),t}),[])},e}(ze),Je=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.related=u.model.relation(n),u.id=r,u.type=i,u.localKey=o,u}return de(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){var r=n[this.related.entity][t];r[this.id]=r[this.id]||this.related.getIdFromRecord(e),r[this.type]=r[this.type]||this.model.entity},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r);this.addEagerConstraintForMorphOne(o,e,t.entity);var u=this.mapSingleRelations(o.get(),this.id);e.forEach((function(t){var e=u.get(t[i.localKey]);t[n]=e||null}))},e.prototype.addEagerConstraintForMorphOne=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.localKey))},e}(ze),Qe=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.related=u.model.relation(n),u.id=r,u.type=i,u.localKey=o,u}return de(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this,i=n[this.related.entity];t.forEach((function(t){var n=i[t];n[r.id]=n[r.id]||r.related.getIdFromRecord(e),n[r.type]=n[r.type]||r.model.entity}))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r);this.addEagerConstraintForMorphMany(o,e,t.entity);var u=this.mapManyRelations(o.get(),this.id);e.forEach((function(t){var e=u.get(t[i.localKey]);t[n]=e||[]}))},e.prototype.addEagerConstraintForMorphMany=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.localKey))},e}(ze),qe=function(t){function e(e,n,r,i,o,u,a,s){var c=t.call(this,e)||this;return c.pivotKey="pivot",c.related=c.model.relation(n),c.pivot=c.model.relation(r),c.relatedId=i,c.id=o,c.type=u,c.parentKey=a,c.relatedKey=s,c}return de(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),u=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(u,e,t.entity);var a=u.get();this.addEagerConstraintForRelated(o,a);var s=this.mapPivotRelations(a,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedId))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.id,this.relatedId):t.reduce((function(t,e){var i=e[n.id];t[i]||(t[i]=[]);var o=r.get(e[n.relatedId]);return void 0===o||0===o.length||(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return Ae.forOwn(e[t.entity],(function(i){var o=t.query().newQuery(r.pivot.entity).where(r.id,i[r.parentKey]).where(r.type,t.entity).get(),u=(i[n]||[]).filter((function(t){return!o.includes(t)}));Ae.isArray(u)&&0!==u.length&&r.createPivotRecord(t,e,i,u)})),e},e.prototype.createPivotRecord=function(t,e,n,r){var i=this;r.forEach((function(r){var o,u,a=n[i.parentKey],s=e[i.related.entity][r][i.relatedKey],c=a+"_"+r+"_"+t.entity,h=e[i.related.entity][r][i.pivotKey]||{};e[i.pivot.entity]=pe(pe({},e[i.pivot.entity]),(o={},o[c]=pe(pe({},h),(u={$id:c},u[i.relatedId]=s,u[i.id]=a,u[i.type]=t.entity,u)),o))}))},e}(ze),Ye=function(t){function e(e,n,r,i,o,u,a,s){var c=t.call(this,e)||this;return c.pivotKey="pivot",c.related=c.model.relation(n),c.pivot=c.model.relation(r),c.relatedId=i,c.id=o,c.type=u,c.parentKey=a,c.relatedKey=s,c}return de(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),u=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(u,e,this.related.entity);var a=u.get();this.addEagerConstraintForRelated(o,a);var s=this.mapPivotRelations(a,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.whereFk(this.type,n).whereFk(this.relatedId,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.id))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.relatedId,this.id):t.reduce((function(t,e){var i=e[n.relatedId];t[i]||(t[i]=[]);var o=r.get(e[n.id]);return void 0===o||0===o.length||(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return Ae.forOwn(e[t.entity],(function(t){var i=t[n];Ae.isArray(i)&&r.createPivotRecord(e,t,i)})),e},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach((function(n){var i,o,u=e[r.parentKey],a=n+"_"+u+"_"+r.related.entity,s=t[r.related.entity][n][r.pivotKey]||{};t[r.pivot.entity]=pe(pe({},t[r.pivot.entity]),(i={},i[a]=pe(pe({},s),(o={$id:a},o[r.relatedId]=u,o[r.id]=r.model.getIdFromRecord(t[r.related.entity][n]),o[r.type]=r.related.entity,o)),i))}))},e}(ze),Xe={relations:!0};function Ze(t){var e=tn(t,{relations:!1});return e.$id=t.$id,e}function tn(t,e){void 0===e&&(e={}),e=pe(pe({},Xe),e);var n={},r=t.$fields();for(var i in r){var o=r[i],u=t[i];o instanceof ze?n[i]=e.relations?on(u):un(u):n[i]=en(t[i])}return n}function en(t){return null===t?null:ge(t)?nn(t):"object"===typeof t?rn(t):t}function nn(t){return t.map((function(t){return en(t)}))}function rn(t){var e={};for(var n in t)e[n]=en(t[n]);return e}function on(t){return null===t?null:ge(t)?t.map((function(t){return t.$toJson()})):t.$toJson()}function un(t){return ge(t)?[]:null}var an=function(){function t(t){this.$id=null,this.$fill(t)}return t.fields=function(){return{}},t.attr=function(t,e){return new Ce(this,t,e)},t.string=function(t,e){return new _e(this,t,e)},t.number=function(t,e){return new Be(this,t,e)},t.boolean=function(t,e){return new Te(this,t,e)},t.uid=function(t){return new He(this,t)},t.increment=function(){return this.uid()},t.hasOne=function(t,e,n){return new Ue(this,t,e,this.localKey(n))},t.belongsTo=function(t,e,n){return new Ne(this,t,e,this.relation(t).localKey(n))},t.hasMany=function(t,e,n){return new Ve(this,t,e,this.localKey(n))},t.hasManyBy=function(t,e,n){return new De(this,t,e,this.relation(t).localKey(n))},t.hasManyThrough=function(t,e,n,r,i,o){return new We(this,t,e,n,r,this.localKey(i),this.relation(e).localKey(o))},t.belongsToMany=function(t,e,n,r,i,o){return new Le(this,t,e,n,r,this.localKey(i),this.relation(t).localKey(o))},t.morphTo=function(t,e){return new Ge(this,t,e)},t.morphOne=function(t,e,n,r){return new Je(this,t,e,n,this.localKey(r))},t.morphMany=function(t,e,n,r){return new Qe(this,t,e,n,this.localKey(r))},t.morphToMany=function(t,e,n,r,i,o,u){return new qe(this,t,e,n,r,i,this.localKey(o),this.relation(t).localKey(u))},t.morphedByMany=function(t,e,n,r,i,o,u){return new Ye(this,t,e,n,r,i,this.localKey(o),this.relation(t).localKey(u))},t.mutators=function(){return{}},t.types=function(){return{}},t.store=function(){return he.store},t.database=function(){return this.store().$db()},t.namespace=function(t){return this.database().namespace+"/"+this.entity+"/"+t},t.getters=function(t){return this.store().getters[this.namespace(t)]},t.dispatch=function(t,e){return this.store().dispatch(this.namespace(t),e)},t.commit=function(t){this.store().commit(this.database().namespace+"/$mutate",{entity:this.entity,callback:t})},t.getFields=function(){return this.cachedFields||(this.cachedFields={}),this.cachedFields[this.entity]||(this.cachedFields[this.entity]=this.fields()),this.cachedFields[this.entity]},t.all=function(){return this.getters("all")()},t.find=function(t){return this.getters("find")(t)},t.findIn=function(t){return this.getters("findIn")(t)},t.query=function(){return this.getters("query")()},t.exists=function(){return this.query().exists()},t.new=function(){return this.dispatch("new")},t.create=function(t){return this.dispatch("create",t)},t.insert=function(t){return this.dispatch("insert",t)},t.update=function(t){return this.dispatch("update",t)},t.insertOrUpdate=function(t){return this.dispatch("insertOrUpdate",t)},t.delete=function(t){return this.dispatch("delete",t)},t.deleteAll=function(){return this.dispatch("deleteAll")},t.isPrimaryKey=function(t){return Ae.isArray(this.primaryKey)?this.primaryKey.includes(t):this.primaryKey===t},t.isCompositePrimaryKey=function(){return Ae.isArray(this.primaryKey)},t.getIdFromRecord=function(t){var e=this,n=this.primaryKey;if("string"===typeof n)return this.getIdFromValue(t[n]);var r=n.reduce((function(n,r){var i=e.getIdFromValue(t[r]);return null!==i&&n.push(i),n}),[]);return r.length===n.length?r:null},t.getIdFromValue=function(t){return"string"===typeof t&&""!==t||"number"===typeof t?t:null},t.getIndexIdFromRecord=function(t){var e=this.getIdFromRecord(t);return null===e?null:Ae.isArray(e)?JSON.stringify(e):String(e)},t.localKey=function(t){return t||("string"===typeof this.primaryKey?this.primaryKey:"id")},t.getModelFromRecord=function(t){return t instanceof this?t.$self():this.getTypeModel(t[this.typeKey])},t.relation=function(t){return"string"!==typeof t?t:this.database().model(t)},t.pivotFields=function(){var t=[];return Ae.forOwn(this.getFields(),(function(e,n){var r;(e instanceof Le||e instanceof qe||e instanceof Ye)&&t.push((r={},r[n]=e,r))})),t},t.hasPivotFields=function(){return this.pivotFields().length>0},t.hasTypes=function(){return Object.keys(this.types()).length>0},t.getTypeModel=function(t){var e=this.types()[t];return e||null},t.getTypeKeyValueFromModel=function(t){var e=t||this,n=this.types();for(var r in n)if(n[r].entity===e.entity)return r;return null},t.findRelationInSubTypes=function(t){var e=this.types();for(var n in e){var r=e[n].getFields();for(var i in r)if(i===t&&r[i]instanceof ze)return r[i]}return null},t.hydrate=function(t){return new this(t).$getAttributes()},t.prototype.$self=function(){return this.constructor},t.prototype.$primaryKey=function(){return this.$self().primaryKey},t.prototype.$fields=function(){return this.$self().getFields()},t.prototype.$setIndexId=function(t){return this.$id=t,this},t.prototype.$store=function(){return this.$self().store()},t.prototype.$namespace=function(t){return this.$self().namespace(t)},t.prototype.$getters=function(t){return this.$self().getters(t)},t.prototype.$dispatch=function(t,e){return ye(this,void 0,void 0,(function(){return ve(this,(function(n){return[2,this.$self().dispatch(t,e)]}))}))},t.prototype.$all=function(){return this.$getters("all")()},t.prototype.$find=function(t){return this.$getters("find")(t)},t.prototype.$findIn=function(t){return this.$getters("findIn")(t)},t.prototype.$query=function(){return this.$getters("query")()},t.prototype.$create=function(t){return ye(this,void 0,void 0,(function(){return ve(this,(function(e){return[2,this.$dispatch("create",t)]}))}))},t.prototype.$insert=function(t){return ye(this,void 0,void 0,(function(){return ve(this,(function(e){return[2,this.$dispatch("insert",t)]}))}))},t.prototype.$update=function(t){return ye(this,void 0,void 0,(function(){return ve(this,(function(e){return Ae.isArray(t)||void 0!==t.where?[2,this.$dispatch("update",t)]:null===this.$self().getIndexIdFromRecord(t)?[2,this.$dispatch("update",{where:this.$self().getIdFromRecord(this),data:t})]:[2,this.$dispatch("update",t)]}))}))},t.prototype.$insertOrUpdate=function(t){return ye(this,void 0,void 0,(function(){return ve(this,(function(e){return[2,this.$dispatch("insertOrUpdate",t)]}))}))},t.prototype.$save=function(){return ye(this,void 0,void 0,(function(){var t,e,n,r=this;return ve(this,(function(i){switch(i.label){case 0:return t=this.$self().getFields(),e=Object.keys(t).reduce((function(e,n){return t[n]instanceof Pe&&(e[n]=r[n]),e}),{}),[4,this.$dispatch("insertOrUpdate",{data:e})];case 1:return n=i.sent(),this.$fill(n[this.$self().entity][0]),[2,this]}}))}))},t.prototype.$delete=function(){return ye(this,void 0,void 0,(function(){var t,e=this;return ve(this,(function(n){return t=this.$primaryKey(),Ae.isArray(t)?[2,this.$dispatch("delete",(function(n){return t.every((function(t){return n[t]===e[t]}))}))]:[2,this.$dispatch("delete",this[t])]}))}))},t.prototype.$deleteAll=function(){return ye(this,void 0,void 0,(function(){return ve(this,(function(t){return[2,this.$dispatch("deleteAll")]}))}))},t.prototype.$fill=function(t){void 0===t&&(t={});var e=this.$fields();for(var n in e){var r=e[n],i=t[n];this[n]=r.make(i,t,n)}void 0!==t.$id&&this.$setIndexId(t.$id)},t.prototype.$generateId=function(){return this.$generatePrimaryId().$generateIndexId()},t.prototype.$generatePrimaryId=function(){var t=this,e=this.$self().primaryKey,n=Ae.isArray(e)?e:[e];return n.forEach((function(e){void 0!==t[e]&&null!==t[e]||(t[e]=xe.make())})),this},t.prototype.$generateIndexId=function(){return this.$setIndexId(this.$getIndexIdFromAttributes())},t.prototype.$getIndexIdFromAttributes=function(){return this.$self().getIndexIdFromRecord(this)},t.prototype.$getAttributes=function(){return Ze(this)},t.prototype.$toJson=function(){return tn(this)},t.primaryKey="id",t.typeKey="type",t.state={},t}(),sn=function(t,e,n,r){return function(){return r[t.$connection+"/query"](t.$name)}},cn=function(t,e,n,r){return function(){return r[t.$connection+"/all"](t.$name)}},hn=function(t,e,n,r){return function(e){return r[t.$connection+"/find"](t.$name,e)}},fn=function(t,e,n,r){return function(e){return r[t.$connection+"/findIn"](t.$name,e)}},ln={query:sn,all:cn,find:hn,findIn:fn};function dn(t){return ye(this,void 0,void 0,(function(){var e,n;return ve(this,(function(r){return e=t.state,n=e.$name,[2,t.dispatch(e.$connection+"/new",{entity:n},{root:!0})]}))}))}function pn(t,e){return ye(this,void 0,void 0,(function(){var n,r;return ve(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/create",pe(pe({},e),{entity:r}),{root:!0})]}))}))}function yn(t,e){return ye(this,void 0,void 0,(function(){var n,r;return ve(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/insert",pe(pe({},e),{entity:r}),{root:!0})]}))}))}function vn(t,e){return ye(this,void 0,void 0,(function(){var n,r;return ve(this,(function(i){return n=t.state,r=n.$name,ge(e)||void 0===e.data?[2,t.dispatch(n.$connection+"/update",{entity:r,data:e},{root:!0})]:[2,t.dispatch(n.$connection+"/update",pe({entity:r},e),{root:!0})]}))}))}function mn(t,e){return ye(this,void 0,void 0,(function(){var n,r;return ve(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/insertOrUpdate",pe({entity:r},e),{root:!0})]}))}))}function gn(t,e){return ye(this,void 0,void 0,(function(){var n,r,i;return ve(this,(function(o){return n=t.state,r=n.$name,i=e,[2,t.dispatch(n.$connection+"/delete",{entity:r,where:i},{root:!0})]}))}))}function bn(t){return ye(this,void 0,void 0,(function(){var e,n;return ve(this,(function(r){return e=t.state,n=e.$name,[2,t.dispatch(e.$connection+"/deleteAll",{entity:n},{root:!0})]}))}))}var wn={new:dn,create:pn,insert:yn,update:vn,insertOrUpdate:mn,delete:gn,deleteAll:bn};function Kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function On(t,e,n){return e&&Kn(t.prototype,e),n&&Kn(t,n),t}function Rn(){return Rn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rn.apply(this,arguments)}function kn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function In(t){return!(!t||"function"!==typeof t.hasOwnProperty||!(t.hasOwnProperty("__ownerID")||t._map&&t._map.hasOwnProperty("__ownerID")))}function Mn(t,e,n){return Object.keys(t).reduce((function(e,r){var i=""+r;return e.has(i)?e.set(i,n(e.get(i),t[i])):e}),e)}var $n=function(t){return function(e){return In(e)?e.get(t):e[t]}},Fn=function(){function t(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!t||"string"!==typeof t)throw new Error("Expected a string key for Entity, but found "+t+".");var r=n,i=r.idAttribute,o=void 0===i?"id":i,u=r.mergeStrategy,a=void 0===u?function(t,e){return Rn({},t,e)}:u,s=r.processStrategy,c=void 0===s?function(t){return Rn({},t)}:s,h=r.fallbackStrategy,f=void 0===h?function(t,e){}:h;this._key=t,this._getId="function"===typeof o?o:$n(o),this._idAttribute=o,this._mergeStrategy=a,this._processStrategy=c,this._fallbackStrategy=f,this.define(e)}var e=t.prototype;return e.define=function(t){this.schema=Object.keys(t).reduce((function(e,n){var r,i=t[n];return Rn({},e,(r={},r[n]=i,r))}),this.schema||{})},e.getId=function(t,e,n){return this._getId(t,e,n)},e.merge=function(t,e){return this._mergeStrategy(t,e)},e.fallback=function(t,e){return this._fallbackStrategy(t,e)},e.normalize=function(t,e,n,r,i,o){var u=this,a=this.getId(t,e,n),s=this.key;if(s in o||(o[s]={}),a in o[s]||(o[s][a]=[]),o[s][a].some((function(e){return e===t})))return a;o[s][a].push(t);var c=this._processStrategy(t,e,n);return Object.keys(this.schema).forEach((function(e){if(c.hasOwnProperty(e)&&"object"===typeof c[e]){var n=u.schema[e],a="function"===typeof n?n(t):n;c[e]=r(c[e],c,e,a,i,o)}})),i(this,c,t,e,n),a},e.denormalize=function(t,e){var n=this;return In(t)?Mn(this.schema,t,e):(Object.keys(this.schema).forEach((function(r){if(t.hasOwnProperty(r)){var i=n.schema[r];t[r]=e(t[r],i)}})),t)},On(t,[{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),t}(),Sn=function(){function t(t,e){e&&(this._schemaAttribute="string"===typeof e?function(t){return t[e]}:e),this.define(t)}var e=t.prototype;return e.define=function(t){this.schema=t},e.getSchemaAttribute=function(t,e,n){return!this.isSingleSchema&&this._schemaAttribute(t,e,n)},e.inferSchema=function(t,e,n){if(this.isSingleSchema)return this.schema;var r=this.getSchemaAttribute(t,e,n);return this.schema[r]},e.normalizeValue=function(t,e,n,r,i,o){var u=this.inferSchema(t,e,n);if(!u)return t;var a=r(t,e,n,u,i,o);return this.isSingleSchema||void 0===a||null===a?a:{id:a,schema:this.getSchemaAttribute(t,e,n)}},e.denormalizeValue=function(t,e){var n=In(t)?t.get("schema"):t.schema;if(!this.isSingleSchema&&!n)return t;var r=this.isSingleSchema?void 0:In(t)?t.get("id"):t.id,i=this.isSingleSchema?this.schema:this.schema[n];return e(r||t,i)},On(t,[{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),t}(),En=function(t){function e(e,n){if(!n)throw new Error('Expected option "schemaAttribute" not found on UnionSchema.');return t.call(this,e,n)||this}kn(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){return this.normalizeValue(t,e,n,r,i,o)},n.denormalize=function(t,e){return this.denormalizeValue(t,e)},e}(Sn),An=function(t){function e(){return t.apply(this,arguments)||this}kn(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){var u=this;return Object.keys(t).reduce((function(e,n,a){var s,c=t[n];return void 0!==c&&null!==c?Rn({},e,(s={},s[n]=u.normalizeValue(c,t,n,r,i,o),s)):e}),{})},n.denormalize=function(t,e){var n=this;return Object.keys(t).reduce((function(r,i){var o,u=t[i];return Rn({},r,(o={},o[i]=n.denormalizeValue(u,e),o))}),{})},e}(Sn),xn=function(t){var e=Array.isArray(t);if(e&&t.length>1)throw new Error("Expected schema definition to be a single schema, but found "+t.length+".");return t[0]},jn=function(t){return Array.isArray(t)?t:Object.keys(t).map((function(e){return t[e]}))},Pn=function(t,e,n,r,i,o,u){t=xn(t);var a=jn(e);return a.map((function(e,a){return i(e,n,r,t,o,u)}))},Cn=function(t){function e(){return t.apply(this,arguments)||this}kn(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){var u=this,a=jn(t);return a.map((function(t,a){return u.normalizeValue(t,e,n,r,i,o)})).filter((function(t){return void 0!==t&&null!==t}))},n.denormalize=function(t,e){var n=this;return t&&t.map?t.map((function(t){return n.denormalizeValue(t,e)})):t},e}(Sn),_n=function(t,e,n,r,i,o,u){var a=Rn({},e);return Object.keys(t).forEach((function(n){var r=t[n],s="function"===typeof r?r(e):r,c=i(e[n],e,n,s,o,u);void 0===c||null===c?delete a[n]:a[n]=c})),a},Bn=function(t,e,n){if(In(e))return Mn(t,e,n);var r=Rn({},e);return Object.keys(t).forEach((function(e){null!=r[e]&&(r[e]=n(r[e],t[e]))})),r},Tn=function(){function t(t){this.define(t)}var e=t.prototype;return e.define=function(t){this.schema=Object.keys(t).reduce((function(e,n){var r,i=t[n];return Rn({},e,(r={},r[n]=i,r))}),this.schema||{})},e.normalize=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _n.apply(void 0,[this.schema].concat(e))},e.denormalize=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Bn.apply(void 0,[this.schema].concat(e))},t}(),Hn=function t(e,n,r,i,o,u){if("object"!==typeof e||!e)return e;if("object"===typeof i&&(!i.normalize||"function"!==typeof i.normalize)){var a=Array.isArray(i)?Pn:_n;return a(i,e,n,r,t,o,u)}return i.normalize(e,n,r,t,o,u)},zn=function(t){return function(e,n,r,i,o){var u=e.key,a=e.getId(r,i,o);u in t||(t[u]={});var s=t[u][a];t[u][a]=s?e.merge(s,n):n}},Un={Array:Cn,Entity:Fn,Object:Tn,Union:En,Values:An},Nn=function(t,e){if(!t||"object"!==typeof t)throw new Error('Unexpected input given to normalize. Expected type to be "object", found "'+(null===t?"null":typeof t)+'".');var n={},r=zn(n),i={},o=Hn(t,t,null,e,r,i);return{entities:n,result:o}},Vn=function(){function t(){}return t.process=function(t,e){if(Ae.isEmpty(e))return{};var n=t.database.schemas[t.model.entity],r=Ae.isArray(e)?[n]:n;return Nn(e,r).entities},t}(),Dn=function(){function t(){}return t.process=function(t,e){return Object.keys(e).forEach((function(n){var r=t.getModel(n);r.hasPivotFields()&&Ae.forOwn(r.pivotFields(),(function(t){Ae.forOwn(t,(function(t,n){t.createPivots(r,e,n)}))}))})),e},t}(),Wn=function(){function t(){}return t.process=function(t,e){return Ae.forOwn(e,(function(n,r){var i=t.getModel(r).fields();Ae.forOwn(n,(function(t){Ae.forOwn(t,(function(n,r){var o=i[r];o instanceof ze&&null!==n&&o.attach(n,t,e)}))}))})),e},t}(),Ln=function(){function t(){}return t.normalize=function(t,e){var n=Vn.process(t,e);return n=Wn.process(t,n),n=Dn.process(t,n),n},t}(),Gn=function(){function t(){}return t.filter=function(t,e){var n=this;return 0===t.wheres.length?e:e.filter((function(e){return n.check(t,e)}))},t.check=function(t,e){var n=Ae.groupBy(t.wheres,(function(t){return t.boolean})),r=this.getComparator(t,e),i=[];return n.and&&i.push(n.and.every(r)),n.or&&i.push(n.or.some(r)),-1!==i.indexOf(!0)},t.getComparator=function(t,e){var n=this;return function(r){if("function"===typeof r.field){var i=new Zn(t.store,t.entity),o=n.executeWhereClosure(i,e,r.field);if("boolean"===typeof o)return o;var u=i.get();return!Ae.isEmpty(u.filter((function(t){return t["$id"]===e["$id"]})))}return"function"===typeof r.value?r.value(e[r.field]):Ae.isArray(r.value)?-1!==r.value.indexOf(e[r.field]):e[r.field]===r.value}},t.executeWhereClosure=function(t,e,n){if(3!==n.length)return n(e,t);var r=new t.model(e);return n(e,t,r)},t}(),Jn=function(){function t(){}return t.filter=function(t,e){if(0===t.orders.length)return e;var n=t.orders.map((function(t){return t.key})),r=t.orders.map((function(t){return t.direction}));return Ae.orderBy(e,n,r)},t}(),Qn=function(){function t(){}return t.filter=function(t,e){return e.slice(t.offsetNumber,t.offsetNumber+t.limitNumber)},t}(),qn=function(){function t(){}return t.where=function(t,e){return Gn.filter(t,e)},t.orderBy=function(t,e){return Jn.filter(t,e)},t.limit=function(t,e){return Qn.filter(t,e)},t}(),Yn=function(){function t(){}return t.with=function(t,e,n){var r=this;"*"!==e?ge(e)?e.forEach((function(e){return r.with(t,e,n)})):this.parseWithRelations(t,e.split("."),n):this.withAll(t)},t.withAll=function(t,e){void 0===e&&(e=function(){return null});var n=t.model.getFields();for(var r in n)n[r]instanceof ze&&this.with(t,r,e)},t.withAllRecursive=function(t,e){this.withAll(t,(function(t){e>0&&t.withAllRecursive(e-1)}))},t.setEagerLoad=function(t,e,n){void 0===n&&(n=null),t.load[e]||(t.load[e]=[]),n&&t.load[e].push(n)},t.parseWithRelations=function(t,e,n){var r=this,i=e[0];i.split("|").forEach((function(i){1!==e.length?r.setEagerLoad(t,i):r.setEagerLoad(t,i,n)})),1!==e.length&&(e.shift(),this.addNestedWiths(t,i,e,n))},t.addNestedWiths=function(t,e,n,r){this.setEagerLoad(t,e,(function(t){t.with(n.join("."),r)}))},t.eagerLoadRelations=function(t,e){var n=t.model.getFields();for(var r in t.load){var i=t.load[r],o=n[r];if(o instanceof ze)o.load(t,e,r,i);else if(t.model.hasTypes()){var u=t.model.findRelationInSubTypes(r);null!==u&&u.load(t,e,r,i)}}},t}(),Xn=function(){function t(){}return t.has=function(t,e,n,r){this.setHas(t,e,"exists",n,r)},t.hasNot=function(t,e,n,r){this.setHas(t,e,"doesntExist",n,r)},t.whereHas=function(t,e,n){this.setHas(t,e,"exists",void 0,void 0,n)},t.whereHasNot=function(t,e,n){this.setHas(t,e,"doesntExist",void 0,void 0,n)},t.setHas=function(t,e,n,r,i,o){void 0===r&&(r=">="),void 0===i&&(i=1),void 0===o&&(o=null),"number"!==typeof r?t.have.push({relation:e,type:n,operator:r,count:i,constraint:o}):t.have.push({relation:e,type:n,operator:">=",count:r,constraint:o})},t.applyConstraints=function(t){if(0!==t.have.length){var e=t.newQuery();this.addHasWhereConstraints(t,e),this.addHasConstraints(t,e.get())}},t.addHasWhereConstraints=function(t,e){t.have.forEach((function(t){e.with(t.relation,t.constraint)}))},t.addHasConstraints=function(t,e){var n=this.getComparators(t),r=[];e.forEach((function(t){n.every((function(e){return e(t)}))&&r.push(t.$self().getIdFromRecord(t))})),t.whereIdIn(r)},t.getComparators=function(t){var e=this;return t.have.map((function(t){return e.getComparator(t)}))},t.getComparator=function(t){var e=this,n=this.getCountComparator(t.operator);return function(r){var i=e.getRelationshipCount(r[t.relation]),o=n(i,t.count);return"exists"===t.type?o:!o}},t.getRelationshipCount=function(t){return ge(t)?t.length:t?1:0},t.getCountComparator=function(t){switch(t){case"=":return function(t,e){return t===e};case">":return function(t,e){return t>e};case">=":return function(t,e){return t>=e};case"<":return function(t,e){return t>0&&t<e};case"<=":return function(t,e){return t>0&&t<=e};default:return function(t,e){return t===e}}},t}(),Zn=function(){function t(t,e){this.appliedOnBase=!0,this.idFilter=null,this.cancelIdFilter=!1,this.joinedIdFilter=null,this.wheres=[],this.have=[],this.orders=[],this.offsetNumber=0,this.limitNumber=Math.pow(2,53)-1,this.load={},this.store=t,this.database=t.$db(),this.model=this.getModel(e),this.baseModel=this.getBaseModel(e),this.entity=e,this.baseEntity=this.baseModel.entity,this.rootState=this.database.getState(),this.state=this.rootState[this.baseEntity],this.appliedOnBase=this.baseEntity===this.entity}return t.deleteAll=function(t){var e=t.$db(),n=e.models();for(var r in n){var i=e.getState()[r];i&&new this(t,r).deleteAll()}},t.on=function(t,e){var n=++this.lastHookId;return this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push({id:n,callback:e}),n},t.off=function(t){var e=this;return Object.keys(this.hooks).some((function(n){var r=e.hooks[n],i=r.findIndex((function(e){return e.id===t}));return-1!==i&&(r.splice(i,1),!0)}))},t.prototype.self=function(){return this.constructor},t.prototype.newQuery=function(e){return e=e||this.entity,new t(this.store,e)},t.prototype.getModel=function(t){var e=t||this.entity;return this.database.model(e)},t.prototype.getModels=function(){return this.database.models()},t.prototype.getBaseModel=function(t){return this.database.baseModel(t)},t.prototype.all=function(){return this.get()},t.prototype.find=function(t){var e=this.state.data[this.normalizeIndexId(t)];return e?this.item(this.hydrate(e)):null},t.prototype.findIn=function(t){var e=this;if(!Ae.isArray(t))return[];var n=t.reduce((function(t,n){var r=e.state.data[e.normalizeIndexId(n)];return r?(t.push(e.hydrate(r)),t):t}),[]);return this.collect(n)},t.prototype.get=function(){var t=this.select();return this.collect(t)},t.prototype.first=function(){var t=this.select();return 0===t.length?null:this.item(this.hydrate(t[0]))},t.prototype.last=function(){var t=this.select();return 0===t.length?null:this.item(this.hydrate(t[t.length-1]))},t.prototype.exists=function(){var t=this.select();return t.length>0},t.prototype.where=function(t,e){return this.isIdfilterable(t)&&this.setIdFilter(e),this.wheres.push({field:t,value:e,boolean:"and"}),this},t.prototype.orWhere=function(t,e){return this.cancelIdFilter=!0,this.wheres.push({field:t,value:e,boolean:"or"}),this},t.prototype.whereId=function(t){return this.model.isCompositePrimaryKey()?this.where("$id",this.normalizeIndexId(t)):this.where(this.model.primaryKey,t)},t.prototype.whereIdIn=function(t){var e=this;if(this.model.isCompositePrimaryKey()){var n=t.reduce((function(t,n){return me(t,[e.normalizeIndexId(n)])}),[]);return this.where("$id",n)}return this.where(this.model.primaryKey,t)},t.prototype.whereFk=function(t,e){var n=Ae.isArray(e)?e:[e];return t===this.model.primaryKey?(this.setJoinedIdFilter(n),this):(this.where(t,n),this)},t.prototype.normalizeIndexId=function(t){if(this.model.isCompositePrimaryKey()){if(!Ae.isArray(t))throw new Error("[Vuex ORM] Entity `"+this.entity+"` is configured with a composite primary key and expects an array value but instead received: "+JSON.stringify(t));return JSON.stringify(t)}if(Ae.isArray(t))throw new Error("[Vuex ORM] Entity `"+this.entity+"` expects a single value but instead received: "+JSON.stringify(t));return t},t.prototype.isIdfilterable=function(t){return(t===this.model.primaryKey||"$id"===t)&&!this.cancelIdFilter},t.prototype.setIdFilter=function(t){var e=this,n=Ae.isArray(t)?t:[t];null!==this.idFilter?this.idFilter=new Set(n.filter((function(t){return e.idFilter.has(t)}))):this.idFilter=new Set(n)},t.prototype.setJoinedIdFilter=function(t){var e=this;null!==this.joinedIdFilter?this.joinedIdFilter=new Set(t.filter((function(t){return e.joinedIdFilter.has(t)}))):this.joinedIdFilter=new Set(t)},t.prototype.orderBy=function(t,e){return void 0===e&&(e="asc"),this.orders.push({key:t,direction:e}),this},t.prototype.offset=function(t){return this.offsetNumber=t,this},t.prototype.limit=function(t){return this.limitNumber=t,this},t.prototype.with=function(t,e){return void 0===e&&(e=null),Yn.with(this,t,e),this},t.prototype.withAll=function(){return Yn.withAll(this),this},t.prototype.withAllRecursive=function(t){return void 0===t&&(t=3),Yn.withAllRecursive(this,t),this},t.prototype.has=function(t,e,n){return Xn.has(this,t,e,n),this},t.prototype.hasNot=function(t,e,n){return Xn.hasNot(this,t,e,n),this},t.prototype.whereHas=function(t,e){return Xn.whereHas(this,t,e),this},t.prototype.whereHasNot=function(t,e){return Xn.whereHasNot(this,t,e),this},t.prototype.records=function(){var t=this;return this.finalizeIdFilter(),this.getIdsToLookup().reduce((function(e,n){var r=t.state.data[n];if(!r)return e;var i=t.hydrate(r);return t.appliedOnBase||t.model.entity===i.$self().entity?(e.push(i),e):e}),[])},t.prototype.finalizeIdFilter=function(){this.cancelIdFilter&&null!==this.idFilter&&(this.where(this.model.isCompositePrimaryKey()?"$id":this.model.primaryKey,Array.from(this.idFilter.values())),this.idFilter=null)},t.prototype.getIdsToLookup=function(){var t=this;return this.idFilter&&this.joinedIdFilter?Array.from(this.idFilter.values()).filter((function(e){return t.joinedIdFilter.has(e)})):this.idFilter||this.joinedIdFilter?Array.from((this.idFilter||this.joinedIdFilter).values()):Object.keys(this.state.data)},t.prototype.select=function(){Xn.applyConstraints(this);var t=this.records();return t=this.executeSelectHook("beforeSelect",t),t=this.filterWhere(t),t=this.executeSelectHook("afterWhere",t),t=this.filterOrderBy(t),t=this.executeSelectHook("afterOrderBy",t),t=this.filterLimit(t),t=this.executeSelectHook("afterLimit",t),t},t.prototype.filterWhere=function(t){return qn.where(this,t)},t.prototype.filterOrderBy=function(t){return qn.orderBy(this,t)},t.prototype.filterLimit=function(t){return qn.limit(this,t)},t.prototype.count=function(){return this.get().length},t.prototype.max=function(t){var e=this.get().reduce((function(e,n){return"number"===typeof n[t]&&e.push(n[t]),e}),[]);return 0===e.length?0:Math.max.apply(Math,e)},t.prototype.min=function(t){var e=this.get().reduce((function(e,n){return"number"===typeof n[t]&&e.push(n[t]),e}),[]);return 0===e.length?0:Math.min.apply(Math,e)},t.prototype.sum=function(t){return this.get().reduce((function(e,n){return"number"===typeof n[t]&&(e+=n[t]),e}),0)},t.prototype.item=function(t){return Object.keys(this.load).length>0&&Yn.eagerLoadRelations(this,[t]),t},t.prototype.collect=function(t){var e=this;return t.length<1?[]:(Object.keys(this.load).length>0&&(t=t.map((function(t){var n=e.model.getModelFromRecord(t);return new n(t)})),Yn.eagerLoadRelations(this,t)),t)},t.prototype.new=function(){var t=(new this.model).$generateId();return this.commitInsert(t.$getAttributes()),t},t.prototype.create=function(t,e){return this.persist("create",t,e)},t.prototype.createRecords=function(t){return this.deleteAll(),this.insertRecords(t)},t.prototype.insert=function(t,e){return this.persist("insert",t,e)},t.prototype.insertRecords=function(t){var e=this.mapHydrateRecords(t);return e=this.executeMutationHooks("beforeCreate",e),this.commitInsertRecords(this.convertCollectionToRecords(e)),this.executeMutationHooks("afterCreate",e),e},t.prototype.update=function(t,e,n){if(Ae.isArray(t))return this.persist("update",t,n);if("function"===typeof t){if(!e)throw new Error("You must specify `where` to update records by specifying `data` as a closure.");return"function"===typeof e?this.updateByCondition(t,e):this.updateById(t,e)}if("function"===typeof e)return this.updateByCondition(t,e);if(!e)return this.persist("update",t,n);if(this.model.isCompositePrimaryKey()&&!Ae.isArray(e))throw new Error("[Vuex ORM] You can't specify `where` value as `string` or `number` when you have a composite key defined in your model. Please include composite keys to the `data` fields.");return this.updateById(t,e)},t.prototype.updateRecords=function(t){var e=this.hydrateRecordsByMerging(t);return this.performUpdate(e)},t.prototype.updateById=function(t,e){var n;e="number"===typeof e?e.toString():this.normalizeIndexId(e);var r=this.state.data[e];if(!r)return null;var i=this.hydrate(r),o=(n={},n[e]=this.processUpdate(t,i),n);return this.performUpdate(o),o[e]},t.prototype.updateByCondition=function(t,e){var n=this,r=Object.keys(this.state.data).reduce((function(r,i){var o=n.hydrate(n.state.data[i]);return e(o)?(r[i]=n.processUpdate(t,o),r):r}),{});return this.performUpdate(r)},t.prototype.processUpdate=function(t,e){return"function"===typeof t?(t(e),e):e.constructor!==this.model&&e instanceof an?this.hydrate(pe(pe({},e),t),e.constructor):this.hydrate(pe(pe({},e),t))},t.prototype.performUpdate=function(t){var e=this;t=this.updateIndexes(t);var n=this.buildHooks("beforeUpdate"),r=this.buildHooks("afterUpdate"),i=[],o=function(o){var a=t[o];if(n.some((function(t){return!1===t(a,null,e.entity)})))return"continue";u.commitInsert(a.$getAttributes()),r.forEach((function(t){t(a,null,e.entity)})),i.push(a)},u=this;for(var a in t)o(a);return i},t.prototype.updateIndexes=function(t){var e=this;return Object.keys(t).reduce((function(t,n){var r=t[n],i=String(e.model.getIndexIdFromRecord(r));return n!==i&&(r.$id=i,t[i]=r,delete t[n]),t}),t)},t.prototype.insertOrUpdate=function(t,e){return this.persist("insertOrUpdate",t,e)},t.prototype.insertOrUpdateRecords=function(t){var e=this,n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];e.state.data[i]?r[i]=o:n[i]=o})),me(this.insertRecords(n),this.updateRecords(r))},t.prototype.persist=function(t,e,n){var r=this,i=Ae.cloneDeep(e),o=this.normalize(i);return Ae.isEmpty(o)?("create"===t&&this.emptyState(),{}):Object.entries(o).reduce((function(e,i){var o=i[0],u=i[1],a=r.newQuery(o),s=r.getPersistMethod(o,n,t),c=a.persistRecords(s,u);return c.length>0&&(e[o]=c),e}),{})},t.prototype.persistRecords=function(t,e){switch(t){case"create":return this.createRecords(e);case"insert":return this.insertRecords(e);case"update":return this.updateRecords(e);case"insertOrUpdate":return this.insertOrUpdateRecords(e)}},t.prototype.getPersistMethod=function(t,e,n){return e.create&&e.create.includes(t)?"create":e.insert&&e.insert.includes(t)?"insert":e.update&&e.update.includes(t)?"update":e.insertOrUpdate&&e.insertOrUpdate.includes(t)?"insertOrUpdate":n},t.prototype.delete=function(t){return"function"===typeof t?this.deleteByCondition(t):this.deleteById(t)},t.prototype.deleteAll=function(){var t=this;return this.appliedOnBase?this.deleteByCondition((function(){return!0})):this.deleteByCondition((function(e){return e.$self().entity===t.model.entity}))},t.prototype.deleteById=function(t){var e=this.find(t);return e?this.deleteByCondition((function(t){return t.$id===e.$id}))[0]:null},t.prototype.deleteByCondition=function(t){var e=this.mapHydrateAndFilterRecords(this.state.data,t);return e=this.executeMutationHooks("beforeDelete",e),0===e.length?[]:(this.commitDelete(e.map((function(t){return t.$id}))),this.executeMutationHooks("afterDelete",e),e)},t.prototype.commit=function(t,e){this.store.commit(this.database.namespace+"/"+t,pe({entity:this.baseEntity},e))},t.prototype.commitInsert=function(t){this.commit("insert",{record:t})},t.prototype.commitInsertRecords=function(t){this.commit("insertRecords",{records:t})},t.prototype.commitDelete=function(t){this.commit("delete",{id:t})},t.prototype.normalize=function(t){return Ln.normalize(this,t)},t.prototype.hydrate=function(t,e){var n;if(e)return new e(t);var r=this.model.getModelFromRecord(t);if(null!==r)return new r(t);if(!this.appliedOnBase&&void 0===t[this.model.typeKey]){var i=this.model.getTypeKeyValueFromModel();return t=pe(pe({},t),(n={},n[this.model.typeKey]=i,n)),new this.model(t)}var o=this.getBaseModel(this.entity);return new o(t)},t.prototype.hydrateRecordsByMerging=function(t){var e=this;return Object.keys(t).reduce((function(n,r){var i=e.state.data[r];if(!i)return n;var o=t[r],u=e.model.getModelFromRecord(i);return null===u?(n[r]=e.hydrate(pe(pe({},i),o)),n):(n[r]=e.hydrate(pe(pe({},i),o),u),n)}),{})},t.prototype.mapHydrateRecords=function(t){var e=this;return Ae.map(t,(function(t){return e.hydrate(t)}))},t.prototype.mapHydrateAndFilterRecords=function(t,e){var n=[];for(var r in t){var i=this.hydrate(t[r]);e(i)&&n.push(i)}return n},t.prototype.convertCollectionToRecords=function(t){return t.reduce((function(t,e){return t[e["$id"]]=e.$getAttributes(),t}),{})},t.prototype.emptyState=function(){this.deleteAll()},t.prototype.buildHooks=function(t){var e=this.getGlobalHookAsArray(t),n=this.model[t];return n&&e.push(n.bind(this.model)),e},t.prototype.getGlobalHookAsArray=function(t){var e=this,n=this.self().hooks[t];return n?n.map((function(t){return t.callback.bind(e)})):[]},t.prototype.executeMutationHooks=function(t,e){var n=this,r=this.buildHooks(t);return 0===r.length?e:e.filter((function(t){return!r.some((function(e){return!1===e(t,null,n.entity)}))}))},t.prototype.executeSelectHook=function(t,e){var n=this,r=this.buildHooks(t);return r.reduce((function(t,r){return t=r(e,n.entity),t}),e)},t.hooks={},t.lastHookId=0,t}();function tr(t){var e=this;return function(t){return new Zn(e,t)}}function er(t){var e=this;return function(t){return new Zn(e,t).all()}}function nr(t){var e=this;return function(t,n){return new Zn(e,t).find(n)}}function rr(t){var e=this;return function(t,n){return new Zn(e,t).findIn(n)}}var ir={query:tr,all:er,find:nr,findIn:rr},or=function(){function t(){}return t.createPersistOptions=function(t){return{create:t.create,insert:t.insert,update:t.update,insertOrUpdate:t.insertOrUpdate}},t}();function ur(t,e){return ye(this,void 0,void 0,(function(){return ve(this,(function(t){return[2,new Zn(this,e.entity).new()]}))}))}function ar(t,e){return ye(this,void 0,void 0,(function(){var t,n,r;return ve(this,(function(i){return t=e.entity,n=e.data,r=or.createPersistOptions(e),[2,new Zn(this,t).create(n,r)]}))}))}function sr(t,e){return ye(this,void 0,void 0,(function(){var t,n,r;return ve(this,(function(i){return t=e.entity,n=e.data,r=or.createPersistOptions(e),[2,new Zn(this,t).insert(n,r)]}))}))}function cr(t,e){return ye(this,void 0,void 0,(function(){var t,n,r,i;return ve(this,(function(o){return t=e.entity,n=e.data,r=e.where||null,i=or.createPersistOptions(e),[2,new Zn(this,t).update(n,r,i)]}))}))}function hr(t,e){return ye(this,void 0,void 0,(function(){var t,n,r;return ve(this,(function(i){return t=e.entity,n=e.data,r=or.createPersistOptions(e),[2,new Zn(this,t).insertOrUpdate(n,r)]}))}))}function fr(t,e){return ye(this,void 0,void 0,(function(){var t,n;return ve(this,(function(r){return t=e.entity,n=e.where,[2,new Zn(this,t).delete(n)]}))}))}function lr(t,e){return ye(this,void 0,void 0,(function(){return ve(this,(function(t){return e&&e.entity?(new Zn(this,e.entity).deleteAll(),[2]):(Zn.deleteAll(this),[2])}))}))}var dr={new:ur,create:ar,insert:sr,update:cr,insertOrUpdate:hr,delete:fr,deleteAll:lr},pr=function(){function t(t,e,n){this.store=t,this.connection=e,this.entity=n,this.rootState=this.store.state[e],this.state=this.rootState[n]}return t.prototype.insert=function(t){var e;this.state.data=pe(pe({},this.state.data),(e={},e[t.$id]=t,e))},t.prototype.insertRecords=function(t){this.state.data=pe(pe({},this.state.data),t)},t.prototype.delete=function(t){var e={};for(var n in this.state.data)t.includes(n)||(e[n]=this.state.data[n]);this.state.data=e},t}();function yr(t,e){e.callback(t[e.entity])}function vr(t,e){var n=e.entity,r=e.record;new pr(this,t.$name,n).insert(r)}function mr(t,e){var n=e.entity,r=e.records;new pr(this,t.$name,n).insertRecords(r)}function gr(t,e){var n=e.entity,r=e.id;new pr(this,t.$name,n).delete(r)}var br={$mutate:yr,insert:vr,insertRecords:mr,delete:gr},wr=function(){function t(){}return t.create=function(t){var e=this;return function(n,r,i){e.generateIds(n,t);var o=e.generateIndexId(n,t);return o}},t.generateIds=function(t,e){var n=ge(e.primaryKey)?e.primaryKey:[e.primaryKey];n.forEach((function(n){if(void 0===t[n]||null===t[n]){var r=e.getFields()[n];t[n]=r instanceof He?r.make():xe.make()}}))},t.generateIndexId=function(t,e){return t.$id=e.getIndexIdFromRecord(t),t.$id},t}(),Kr=function(){function t(t){var e=this;this.schemas={},this.model=t;var n=t.database().models();Object.keys(n).forEach((function(t){e.one(n[t])}))}return t.create=function(t){return new this(t).one()},t.prototype.one=function(t){if(t=t||this.model,this.schemas[t.entity])return this.schemas[t.entity];var e=new Un.Entity(t.entity,{},{idAttribute:wr.create(t)});this.schemas[t.entity]=e;var n=this.definition(t);return e.define(n),e},t.prototype.many=function(t){return new Un.Array(this.one(t))},t.prototype.union=function(t){return new Un.Union(this.schemas,t)},t.prototype.definition=function(t){var e=this,n=t.getFields();return Object.keys(n).reduce((function(t,r){var i=n[r];return i instanceof ze&&(t[r]=i.define(e)),t}),{})},t}(),Or=function(){function t(){this.entities=[],this.schemas={},this.isStarted=!1}return t.prototype.start=function(t,e){this.store=t,this.namespace=e,this.connect(),this.registerModules(),this.createSchema(),this.isStarted=!0},t.prototype.register=function(t,e){void 0===e&&(e={}),this.checkModelTypeMappingCapability(t);var n={name:t.entity,base:t.baseEntity||t.entity,model:this.createBindingModel(t),module:e};this.entities.push(n),this.isStarted&&(this.registerModule(n),this.registerSchema(n))},t.prototype.model=function(t){var e="string"===typeof t?t:t.entity,n=this.models()[e];if(!n)throw new Error("[Vuex ORM] Could not find the model `"+e+"`. Please check if you have registered the model to the database.");return n},t.prototype.baseModel=function(t){var e="string"===typeof t?t:t.entity,n=this.baseModels()[e];if(!n)throw new Error("[Vuex ORM] Could not find the model `"+e+"`. Please check if you have registered the model to the database.");return n},t.prototype.models=function(){return this.entities.reduce((function(t,e){return t[e.name]=e.model,t}),{})},t.prototype.baseModels=function(){var t=this;return this.entities.reduce((function(e,n){return e[n.name]=t.model(n.base),e}),{})},t.prototype.module=function(t){var e=this.modules()[t];if(!e)throw new Error("[Vuex ORM] Could not find the module `"+t+"`. Please check if you have registered the module to the database.");return e},t.prototype.modules=function(){return this.entities.reduce((function(t,e){return t[e.name]=e.module,t}),{})},t.prototype.getState=function(){return this.store.state[this.namespace]},t.prototype.createBindingModel=function(t){var e,n=this;try{e=new Function("model","\n        'use strict';\n        return class "+t.name+" extends model {}\n      ")(t)}catch(r){e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return de(e,t),e}(t),Object.defineProperty(e,"name",{get:function(){return t.name}})}return Object.defineProperty(e,"store",{value:function(){return n.store}}),e},t.prototype.registerModules=function(){this.store.registerModule(this.namespace,this.createModule())},t.prototype.registerModule=function(t){this.store.registerModule([this.namespace,t.name],this.createSubModule(t))},t.prototype.createModule=function(){var t=this,e=this.createRootModule();return this.entities.forEach((function(n){e.modules[n.name]=t.createSubModule(n)})),e},t.prototype.createRootModule=function(){return{namespaced:!0,state:this.createRootState(),getters:this.createRootGetters(),actions:this.createRootActions(),mutations:this.createRootMutations(),modules:{}}},t.prototype.createRootState=function(){var t=this;return function(){return{$name:t.namespace}}},t.prototype.createRootGetters=function(){var t=this;return Re(ir,(function(e,n){return ir[n].bind(t.store)}))},t.prototype.createRootActions=function(){return dr},t.prototype.createRootMutations=function(){return br},t.prototype.createSubModule=function(t){return{namespaced:!0,state:this.createSubState(t),getters:this.createSubGetters(t),actions:this.createSubActions(t),mutations:this.createSubMutations(t)}},t.prototype.createSubState=function(t){var e=this,n=t.name,r=t.model,i=t.module,o="function"===typeof r.state?r.state():r.state,u="function"===typeof i.state?i.state():i.state;return function(){return pe(pe(pe({},o),u),{$connection:e.namespace,$name:n,data:{}})}},t.prototype.createSubGetters=function(t){return pe(pe({},ln),t.module.getters)},t.prototype.createSubActions=function(t){return pe(pe({},wn),t.module.actions)},t.prototype.createSubMutations=function(t){var e;return e=t.module.mutations,null!==e&&void 0!==e?e:{}},t.prototype.createSchema=function(){var t=this;this.entities.forEach((function(e){t.registerSchema(e)}))},t.prototype.registerSchema=function(t){this.schemas[t.name]=Kr.create(t.model)},t.prototype.connect=function(){var t=this;this.store.$db=function(){return t}},t.prototype.checkModelTypeMappingCapability=function(t){},t}();function Rr(t,e){void 0===e&&(e={});var n={Model:an,Attribute:je,Type:Pe,Attr:Ce,String:_e,Number:Be,Boolean:Te,Uid:He,Relation:ze,HasOne:Ue,BelongsTo:Ne,HasMany:Ve,HasManyBy:De,BelongsToMany:Le,HasManyThrough:We,MorphTo:Ge,MorphOne:Je,MorphMany:Qe,MorphToMany:qe,MorphedByMany:Ye,Getters:ln,Actions:wn,RootGetters:ir,RootActions:dr,RootMutations:br,Query:Zn,Database:Or};t.install(n,e)}var kr={install:fe,use:Rr,Container:he,Database:Or,Model:an,Attribute:je,Type:Pe,Attr:Ce,String:_e,Number:Be,Boolean:Te,Uid:He,Relation:ze,HasOne:Ue,BelongsTo:Ne,HasMany:Ve,HasManyBy:De,BelongsToMany:Le,HasManyThrough:We,MorphTo:Ge,MorphOne:Je,MorphMany:Qe,MorphToMany:qe,MorphedByMany:Ye,Getters:ln,Actions:wn,RootGetters:ir,RootActions:dr,RootMutations:br,Query:Zn};e["b"]=kr}}]);