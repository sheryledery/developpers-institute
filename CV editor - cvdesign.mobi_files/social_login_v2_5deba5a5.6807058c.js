(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["social_login_v2~5deba5a5"],{"29a5":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"social-profile"},[r("div",{staticClass:"container"},[r("h1",{domProps:{innerHTML:e._s(e.$t("social_login.title"))}}),r("p",{domProps:{innerHTML:e._s(e.$t("social_login.description"))}}),r("div",{staticClass:"flex"},[r("cardCircled",{staticClass:"customWidth",attrs:{maxWidth:"default",showCircle:!1}},[r("loader"),r("div",{staticClass:"group-buttons"},[r("div",{staticClass:"button color--google",on:{click:function(t){return e.loginWithGoogle()}}},[r("div",{staticClass:"logo"},[r("font-awesome-icon",{attrs:{icon:["fab","google"]}})],1),r("span",[e._v("Google")]),r("div",{staticClass:"arrow"},[r("font-awesome-icon",{attrs:{icon:["fas","chevron-right"]}})],1)]),e.error_google?r("div",{staticClass:"error"},[e._v(e._s(e.error_google))]):e._e(),r("div",{staticClass:"button color--facebook",on:{click:function(t){return e.loginWithFacebook()}}},[r("div",{staticClass:"logo"},[r("font-awesome-icon",{attrs:{icon:["fab","facebook-f"]}})],1),r("span",[e._v("Facebook")]),r("div",{staticClass:"arrow"},[r("font-awesome-icon",{attrs:{icon:["fas","chevron-right"]}})],1)]),e.error_facebook?r("div",{staticClass:"error"},[e._v(e._s(e.error_facebook))]):e._e(),r("div",{staticClass:"options"},[r("div",{staticClass:"button-option white",domProps:{innerHTML:e._s(e.$t("common.back"))},on:{click:function(t){return e.back()}}}),r("div",{staticClass:"button-option",domProps:{innerHTML:e._s(e.$t("common.saltar"))},on:{click:function(t){return e.next()}}})])])],1)],1)])])},o=[],a=(r("d3b7"),r("ac1f"),r("5319"),r("96cf"),r("1da1")),s=r("59ca"),i=r.n(s),c=r("12b3"),u=r("38a2"),l=r("3c09"),f=r("3242"),p={name:"social_login",mixins:[l["a"],f["a"]],data:function(){return{error_google:null,error_facebook:null}},components:{cardCircled:c["a"],loader:u["a"]},methods:{back:function(){this.$router.replace({name:"select-template"})},next:function(){this.$router.push({name:"basic-info"})},loginWithGoogle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("loaderStore/showLoader"),r=new i.a.auth.GoogleAuthProvider,i.a.auth().useDeviceLanguage(),i.a.auth().signInWithPopup(r).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r.user){t.next=13;break}return t.next=3,e.MIXIN_registerInPlatform(r.user);case 3:if(n=t.sent,"success"!=n){t.next=9;break}e.MIXIN_createCV(localStorage.template_id),e.$ga.event({eventCategory:"access_platform",eventAction:"signup",eventLabel:"google_provider"}),t.next=13;break;case 9:return t.next=11,r.user.getIdToken(!0);case 11:o=t.sent,e.$cvDesignApi("users").signIn(o).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("success"!=r.status){t.next=9;break}return t.next=3,e.$store.commit("userAuthStore/setUser",r.user);case 3:return t.next=5,e.$store.commit("userAuthStore/setProfilePayments",r.profilePayment);case 5:return t.next=7,e.$store.dispatch("userAuthStore/pushJWT",r.token);case 7:e.$ga.event({eventCategory:"access_platform",eventAction:"auto signin",eventLabel:"google_provider"}),e.$router.replace({name:"resumes"});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.error_google=e.$t("errors.user_exists")}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)})).finally((function(){e.$store.commit("loaderStore/hideLoader")}));case 4:case"end":return t.stop()}}),t)})))()},loginWithFacebook:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("loaderStore/showLoader"),r=new i.a.auth.FacebookAuthProvider,i.a.auth().useDeviceLanguage(),r.setCustomParameters({display:"popup"}),r.addScope("email"),i.a.auth().signInWithPopup(r).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r.user){t.next=13;break}return t.next=3,e.MIXIN_registerInPlatform(r.user);case 3:if(n=t.sent,"success"!=n){t.next=9;break}e.MIXIN_createCV(localStorage.template_id),e.$ga.event({eventCategory:"access_platform",eventAction:"signup",eventLabel:"facebook_provider"}),t.next=13;break;case 9:return t.next=11,r.user.getIdToken(!0);case 11:o=t.sent,e.$cvDesignApi("users").signIn(o).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("success"!=r.status){t.next=9;break}return t.next=3,e.$store.commit("userAuthStore/setUser",r.user);case 3:return t.next=5,e.$store.commit("userAuthStore/setProfilePayments",r.profilePayment);case 5:return t.next=7,e.$store.dispatch("userAuthStore/pushJWT",r.token);case 7:e.$ga.event({eventCategory:"access_platform",eventAction:"auto signin",eventLabel:"facebook_provider"}),e.$router.replace({name:"resumes"});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.error_facebook=e.$t("errors.user_exists")}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)})).finally((function(){e.$store.commit("loaderStore/hideLoader")}));case 6:case"end":return t.stop()}}),t)})))()}}},m=p,g=(r("b2ef"),r("2877")),h=Object(g["a"])(m,n,o,!1,null,"18b39342",null);t["default"]=h.exports},"3c09":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("96cf");var n=r("1da1"),o={methods:{MIXIN_registerInPlatform:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getIdToken(!0);case 2:return o=r.sent,a=t.$store.getters["webConfStore/language"],r.next=6,t.$cvDesignApi("users").register(o,a).then(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("success"!=r.status){e.next=7;break}return e.next=3,t.$store.commit("userAuthStore/setUser",r.user);case 3:return e.next=5,t.$store.commit("userAuthStore/setProfilePayments",r.profilePayment);case 5:return e.next=7,t.$store.dispatch("userAuthStore/pushJWT",r.token);case 7:return e.abrupt("return",r.status);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return e}));case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})))()},MIXIN_validEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}}}},a4e5:function(e,t,r){},b2ef:function(e,t,r){"use strict";var n=r("a4e5"),o=r.n(n);o.a}}]);