(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cv_builder~281a44dd","cl_builder~281a44dd"],{"0ac0":function(t,e,r){"use strict";r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return S})),r.d(e,"c",(function(){return w})),r.d(e,"d",(function(){return f})),r.d(e,"e",(function(){return O})),r.d(e,"f",(function(){return x})),r.d(e,"g",(function(){return E})),r.d(e,"h",(function(){return M})),r.d(e,"i",(function(){return T})),r.d(e,"j",(function(){return k}));var n=r("304a"),o=65535,i=Math.pow(2,16);function a(t,e){return t+e*i}function s(t){return t&o}function l(t){return(t-(t&o))/i}var c=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null),this.pos=t,this.deleted=e,this.recover=r},p=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};p.prototype.recover=function(t){var e=0,r=s(t);if(!this.inverted)for(var n=0;n<r;n++)e+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*r]+e+l(t)},p.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},p.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},p.prototype._map=function(t,e,r){for(var n=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var l=this.ranges[s]-(this.inverted?n:0);if(l>t)break;var p=this.ranges[s+o],h=this.ranges[s+i],u=l+p;if(t<=u){var f=p?t==l?-1:t==u?1:e:e,d=l+n+(f<0?0:h);if(r)return d;var m=t==(e<0?l:u)?null:a(s/3,t-l);return new c(d,e<0?t!=l:t!=u,m)}n+=h-p}return r?t+n:new c(t+n)},p.prototype.touches=function(t,e){for(var r=0,n=s(e),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;var c=this.ranges[a+o],p=l+c;if(t<=p&&a==3*n)return!0;r+=this.ranges[a+i]-c}return!1},p.prototype.forEach=function(t){for(var e=this.inverted?2:1,r=this.inverted?1:2,n=0,o=0;n<this.ranges.length;n+=3){var i=this.ranges[n],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),l=this.ranges[n+e],c=this.ranges[n+r];t(a,a+l,s,s+c),o+=c-l}},p.prototype.invert=function(){return new p(this.ranges,!this.inverted)},p.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},p.offset=function(t){return 0==t?p.empty:new p(t<0?[0,-t,0]:[0,0,t])},p.empty=new p([]);var h=function(t,e,r,n){this.maps=t||[],this.from=r||0,this.to=null==n?this.maps.length:n,this.mirror=e};function u(t){var e=Error.call(this,t);return e.__proto__=u.prototype,e}h.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new h(this.maps,this.mirror,t,e)},h.prototype.copy=function(){return new h(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},h.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},h.prototype.appendMapping=function(t){for(var e=0,r=this.maps.length;e<t.maps.length;e++){var n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?r+n:null)}},h.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},h.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},h.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,r=this.maps.length+t.maps.length;e>=0;e--){var n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?r-n-1:null)}},h.prototype.invert=function(){var t=new h;return t.appendMappingInverted(this),t},h.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,e);return t},h.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},h.prototype._map=function(t,e,r){for(var n=!1,o=this.from;o<this.to;o++){var i=this.maps[o],a=i.mapResult(t,e);if(null!=a.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,t=this.maps[s].recover(a.recover);continue}}a.deleted&&(n=!0),t=a.pos}return r?t:new c(t,n)},u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.name="TransformError";var f=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new h},d={before:{configurable:!0},docChanged:{configurable:!0}};function m(){throw new Error("Override me")}d.before.get=function(){return this.docs.length?this.docs[0]:this.doc},f.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new u(e.failed);return this},f.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},d.docChanged.get=function(){return this.steps.length>0},f.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(f.prototype,d);var v=Object.create(null),g=function(){};g.prototype.apply=function(t){return m()},g.prototype.getMap=function(){return p.empty},g.prototype.invert=function(t){return m()},g.prototype.map=function(t){return m()},g.prototype.merge=function(t){return null},g.prototype.toJSON=function(){return m()},g.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=v[e.stepType];if(!r)throw new RangeError("No step type "+e.stepType+" defined");return r.fromJSON(t,e)},g.jsonID=function(t,e){if(t in v)throw new RangeError("Duplicate use of step JSON ID "+t);return v[t]=e,e.prototype.jsonID=t,e};var y=function(t,e){this.doc=t,this.failed=e};y.ok=function(t){return new y(t,null)},y.fail=function(t){return new y(null,t)},y.fromReplace=function(t,e,r,o){try{return y.ok(t.replace(e,r,o))}catch(i){if(i instanceof n["ReplaceError"])return y.fail(i.message);throw i}};var w=function(t){function e(e,r,n,o){t.call(this),this.from=e,this.to=r,this.slice=n,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&b(t,this.from,this.to)?y.fail("Structure replace would overwrite content"):y.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new p([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted?null:new e(r.pos,Math.max(r.pos,n.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var r=this.slice.size+t.slice.size==0?n["Slice"].empty:new n["Slice"](t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,r,this.structure)}var o=this.slice.size+t.slice.size==0?n["Slice"].empty:new n["Slice"](this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(r.from,r.to,n["Slice"].fromJSON(t,r.slice),!!r.structure)},e}(g);g.jsonID("replace",w);var S=function(t){function e(e,r,n,o,i,a,s){t.call(this),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=o,this.slice=i,this.insert=a,this.structure=!!s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(b(t,this.from,this.gapFrom)||b(t,this.gapTo,this.to)))return y.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return y.fail("Gap is not a flat range");var r=this.slice.insertAt(this.insert,e.content);return r?y.fromReplace(t,this.from,this.to,r):y.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new p([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var r=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return r.deleted&&n.deleted||o<r.pos||i>n.pos?null:new e(r.pos,n.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to||"number"!=typeof r.gapFrom||"number"!=typeof r.gapTo||"number"!=typeof r.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(r.from,r.to,r.gapFrom,r.gapTo,n["Slice"].fromJSON(t,r.slice),r.insert,!!r.structure)},e}(g);function b(t,e,r){var n=t.resolve(e),o=r-e,i=n.depth;while(o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount)i--,o--;if(o>0){var a=n.node(i).maybeChild(n.indexAfter(i));while(o>0){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}}return!1}function C(t,e,r){return(0==e||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function k(t){for(var e=t.parent,r=e.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var o=t.$from.node(n),i=t.$from.index(n),a=t.$to.indexAfter(n);if(n<t.depth&&o.canReplace(i,a,r))return n;if(0==n||o.type.spec.isolating||!C(o,i,a))break}}function M(t,e,r,n){void 0===n&&(n=t);var o=A(t,e),i=o&&R(n,e);return i?o.map($).concat({type:e,attrs:r}).concat(i.map($)):null}function $(t){return{type:t,attrs:null}}function A(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;var a=i.length?i[0]:e;return r.canReplaceWith(n,o,a)?i:null}function R(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.child(n),a=e.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=a.length?a[a.length-1]:e,l=s.contentMatch,c=n;l&&c<o;c++)l=l.matchType(r.child(c).type);return l&&l.validEnd?a:null}function N(t,e,r){var n=t.resolve(e),o=n.index();return n.parent.canReplaceWith(o,o+1,r)}function x(t,e,r,n){void 0===r&&(r=1);var o=t.resolve(e),i=o.depth-r,a=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,l=r-2;s>i;s--,l--){var c=o.node(s),p=o.index(s);if(c.type.spec.isolating)return!1;var h=c.content.cutByIndex(p,c.childCount),u=n&&n[l]||c;if(u!=c&&(h=h.replaceChild(0,u.type.create(u.attrs))),!c.canReplace(p+1,c.childCount)||!u.type.validContent(h))return!1}var f=o.indexAfter(i),d=n&&n[0];return o.node(i).canReplaceWith(f,f,d?d.type:o.node(i+1).type)}function O(t,e){var r=t.resolve(e),n=r.index();return F(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function F(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function T(t,e,r){void 0===r&&(r=-1);for(var n=t.resolve(e),o=n.depth;;o--){var i=void 0,a=void 0,s=n.index(o);if(o==n.depth?(i=n.nodeBefore,a=n.nodeAfter):r>0?(i=n.node(o+1),s++,a=n.node(o).maybeChild(s)):(i=n.node(o).maybeChild(s-1),a=n.node(o+1)),i&&!i.isTextblock&&F(i,a)&&n.node(o).canReplace(s,s+1))return e;if(0==o)break;e=r<0?n.before(o):n.after(o)}}function z(t,e,r){var n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(0==n.parentOffset)for(var o=n.depth-1;o>=0;o--){var i=n.index(o);if(n.node(o).canReplaceWith(i,i,r))return n.before(o+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(var a=n.depth-1;a>=0;a--){var s=n.indexAfter(a);if(n.node(a).canReplaceWith(s,s,r))return n.after(a+1);if(s<n.node(a).childCount)return null}}function E(t,e,r){var n=t.resolve(e);if(!r.content.size)return e;for(var o=r.content,i=0;i<r.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==r.openStart&&r.size?2:1);a++)for(var s=n.depth;s>=0;s--){var l=s==n.depth?0:n.pos<=(n.start(s+1)+n.end(s+1))/2?-1:1,c=n.index(s)+(l>0?1:0);if(1==a?n.node(s).canReplace(c,c,o):n.node(s).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==l?n.pos:l<0?n.before(s+1):n.after(s+1)}return null}function _(t,e,r){for(var o=[],i=0;i<t.childCount;i++){var a=t.child(i);a.content.size&&(a=a.copy(_(a.content,e,a))),a.isInline&&(a=e(a,r,i)),o.push(a)}return n["Fragment"].fromArray(o)}g.jsonID("replaceAround",S),f.prototype.lift=function(t,e){for(var r=t.$from,o=t.$to,i=t.depth,a=r.before(i+1),s=o.after(i+1),l=a,c=s,p=n["Fragment"].empty,h=0,u=i,f=!1;u>e;u--)f||r.index(u)>0?(f=!0,p=n["Fragment"].from(r.node(u).copy(p)),h++):l--;for(var d=n["Fragment"].empty,m=0,v=i,g=!1;v>e;v--)g||o.after(v+1)<o.end(v)?(g=!0,d=n["Fragment"].from(o.node(v).copy(d)),m++):c++;return this.step(new S(l,c,a,s,new n["Slice"](p.append(d),h,m),p.size-h,!0))},f.prototype.wrap=function(t,e){for(var r=n["Fragment"].empty,o=e.length-1;o>=0;o--)r=n["Fragment"].from(e[o].type.create(e[o].attrs,r));var i=t.start,a=t.end;return this.step(new S(i,a,i,a,new n["Slice"](r,0,0),e.length,!0))},f.prototype.setBlockType=function(t,e,r,o){var i=this;if(void 0===e&&(e=t),!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var a=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(r,o)&&N(i.doc,i.mapping.slice(a).map(e),r)){i.clearIncompatible(i.mapping.slice(a).map(e,1),r);var s=i.mapping.slice(a),l=s.map(e,1),c=s.map(e+t.nodeSize,1);return i.step(new S(l,c,l+1,c-1,new n["Slice"](n["Fragment"].from(r.create(o,null,t.marks)),0,0),1,!0)),!1}})),this},f.prototype.setNodeMarkup=function(t,e,r,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var a=e.create(r,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,a);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new S(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new n["Slice"](n["Fragment"].from(a),0,0),1,!0))},f.prototype.split=function(t,e,r){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=n["Fragment"].empty,a=n["Fragment"].empty,s=o.depth,l=o.depth-e,c=e-1;s>l;s--,c--){i=n["Fragment"].from(o.node(s).copy(i));var p=r&&r[c];a=n["Fragment"].from(p?p.type.create(p.attrs,a):o.node(s).copy(a))}return this.step(new w(t,t,new n["Slice"](i.append(a),e,e),!0))},f.prototype.join=function(t,e){void 0===e&&(e=1);var r=new w(t-e,t+e,n["Slice"].empty,!0);return this.step(r)};var I=function(t){function e(e,r,n){t.call(this),this.from=e,this.to=r,this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,r=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),a=new n["Slice"](_(r.content,(function(t,r){return r.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),r.openStart,r.openEnd);return y.fromReplace(t,this.from,this.to,a)},e.prototype.invert=function(){return new D(this.from,this.to,this.mark)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new e(r.pos,n.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(r.from,r.to,t.markFromJSON(r.mark))},e}(g);g.jsonID("addMark",I);var D=function(t){function e(e,r,n){t.call(this),this.from=e,this.to=r,this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,r=t.slice(this.from,this.to),o=new n["Slice"](_(r.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),r.openStart,r.openEnd);return y.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new I(this.from,this.to,this.mark)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new e(r.pos,n.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(r.from,r.to,t.markFromJSON(r.mark))},e}(g);function J(t,e,r,o){if(void 0===r&&(r=e),void 0===o&&(o=n["Slice"].empty),e==r&&!o.size)return null;var i=t.resolve(e),a=t.resolve(r);return B(i,a,o)?new w(e,r,o):new j(i,a,o).fit()}function B(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}g.jsonID("removeMark",D),f.prototype.addMark=function(t,e,r){var n=this,o=[],i=[],a=null,s=null;return this.doc.nodesBetween(t,e,(function(n,l,c){if(n.isInline){var p=n.marks;if(!r.isInSet(p)&&c.type.allowsMarkType(r.type)){for(var h=Math.max(l,t),u=Math.min(l+n.nodeSize,e),f=r.addToSet(p),d=0;d<p.length;d++)p[d].isInSet(f)||(a&&a.to==h&&a.mark.eq(p[d])?a.to=u:o.push(a=new D(h,u,p[d])));s&&s.to==h?s.to=u:i.push(s=new I(h,u,r))}}})),o.forEach((function(t){return n.step(t)})),i.forEach((function(t){return n.step(t)})),this},f.prototype.removeMark=function(t,e,r){var o=this;void 0===r&&(r=null);var i=[],a=0;return this.doc.nodesBetween(t,e,(function(o,s){if(o.isInline){a++;var l=null;if(r instanceof n["MarkType"]){var c=r.isInSet(o.marks);c&&(l=[c])}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length)for(var p=Math.min(s+o.nodeSize,e),h=0;h<l.length;h++){for(var u=l[h],f=void 0,d=0;d<i.length;d++){var m=i[d];m.step==a-1&&u.eq(i[d].style)&&(f=m)}f?(f.to=p,f.step=a):i.push({style:u,from:Math.max(s,t),to:p,step:a})}}})),i.forEach((function(t){return o.step(new D(t.from,t.to,t.style))})),this},f.prototype.clearIncompatible=function(t,e,r){void 0===r&&(r=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],a=t+1,s=0;s<o.childCount;s++){var l=o.child(s),c=a+l.nodeSize,p=r.matchType(l.type,l.attrs);if(p){r=p;for(var h=0;h<l.marks.length;h++)e.allowsMarkType(l.marks[h].type)||this.step(new D(a,c,l.marks[h]))}else i.push(new w(a,c,n["Slice"].empty));a=c}if(!r.validEnd){var u=r.fillBefore(n["Fragment"].empty,!0);this.replace(a,a,new n["Slice"](u,0,0))}for(var f=i.length-1;f>=0;f--)this.step(i[f]);return this},f.prototype.replace=function(t,e,r){void 0===e&&(e=t),void 0===r&&(r=n["Slice"].empty);var o=J(this.doc,t,e,r);return o&&this.step(o),this},f.prototype.replaceWith=function(t,e,r){return this.replace(t,e,new n["Slice"](n["Fragment"].from(r),0,0))},f.prototype.delete=function(t,e){return this.replace(t,e,n["Slice"].empty)},f.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var j=function(t,e,r){this.$to=e,this.$from=t,this.unplaced=r,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=n["Fragment"].empty;for(var a=t.depth;a>0;a--)this.placed=n["Fragment"].from(t.node(a).copy(this.placed))},W={depth:{configurable:!0}};function L(t,e,r){return 0==e?t.cutByIndex(r):t.replaceChild(0,t.firstChild.copy(L(t.firstChild.content,e-1,r)))}function H(t,e,r){return 0==e?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(H(t.lastChild.content,e-1,r)))}function P(t,e){for(var r=0;r<e;r++)t=t.firstChild.content;return t}function K(t,e,r){if(e<=0)return t;var o=t.content;return e>1&&(o=o.replaceChild(0,K(o.firstChild,e-1,1==o.childCount?r-1:0))),e>0&&(o=t.type.contentMatch.fillBefore(o).append(o),r<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(n["Fragment"].empty,!0)))),t.copy(o)}function q(t,e,r,n,o){var i=t.node(e),a=o?t.indexAfter(e):t.index(e);if(a==i.childCount&&!r.compatibleContent(i.type))return null;var s=n.fillBefore(i.content,!0,a);return s&&!V(r,i.content,a)?s:null}function V(t,e,r){for(var n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function X(t,e,r,o,i){if(e<r){var a=t.firstChild;t=t.replaceChild(0,a.copy(X(a.content,e+1,r,o,a)))}if(e>o){var s=i.contentMatchAt(0),l=s.fillBefore(t).append(t);t=l.append(s.matchFragment(l).fillBefore(n["Fragment"].empty,!0))}return t}function G(t,e){for(var r=[],n=Math.min(t.depth,e.depth),o=n;o>=0;o--){var i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;i==e.start(o)&&r.push(o)}return r}W.depth.get=function(){return this.frontier.length-1},j.prototype.fit=function(){while(this.unplaced.size){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(e<0?this.$to:o.doc.resolve(e));if(!i)return null;var a=this.placed,s=o.depth,l=i.depth;while(s&&l&&1==a.childCount)a=a.firstChild.content,s--,l--;var c=new n["Slice"](a,s,l);return e>-1?new S(o.pos,e,this.$to.pos,this.$to.end(),c,r):c.size||o.pos!=this.$to.pos?new w(o.pos,i.pos,c):void 0},j.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var r=void 0,o=void 0;e?(o=P(this.unplaced.content,e-1).firstChild,r=o.content):r=this.unplaced.content;for(var i=r.firstChild,a=this.depth;a>=0;a--){var s=this.frontier[a],l=s.type,c=s.match,p=void 0,h=void 0;if(1==t&&(i?c.matchType(i.type)||(h=c.fillBefore(n["Fragment"].from(i),!1)):l.compatibleContent(o.type)))return{sliceDepth:e,frontierDepth:a,parent:o,inject:h};if(2==t&&i&&(p=c.findWrapping(i.type)))return{sliceDepth:e,frontierDepth:a,parent:o,wrap:p};if(o&&c.matchType(o.type))break}}},j.prototype.openMore=function(){var t=this.unplaced,e=t.content,r=t.openStart,o=t.openEnd,i=P(e,r);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new n["Slice"](e,r+1,Math.max(o,i.size+r>=e.size-o?r+1:0)),!0)},j.prototype.dropNode=function(){var t=this.unplaced,e=t.content,r=t.openStart,o=t.openEnd,i=P(e,r);if(i.childCount<=1&&r>0){var a=e.size-r<=r+i.size;this.unplaced=new n["Slice"](L(e,r-1,1),r-1,a?r-1:o)}else this.unplaced=new n["Slice"](L(e,r,1),r,o)},j.prototype.placeNodes=function(t){var e=t.sliceDepth,r=t.frontierDepth,o=t.parent,i=t.inject,a=t.wrap;while(this.depth>r)this.closeFrontierNode();if(a)for(var s=0;s<a.length;s++)this.openFrontierNode(a[s]);var l=this.unplaced,c=o?o.content:l.content,p=l.openStart-e,h=0,u=[],f=this.frontier[r],d=f.match,m=f.type;if(i){for(var v=0;v<i.childCount;v++)u.push(i.child(v));d=d.matchFragment(i)}var g=c.size+e-(l.content.size-l.openEnd);while(h<c.childCount){var y=c.child(h),w=d.matchType(y.type);if(!w)break;h++,(h>1||0==p||y.content.size)&&(d=w,u.push(K(y.mark(m.allowedMarks(y.marks)),1==h?p:0,h==c.childCount?g:-1)))}var S=h==c.childCount;S||(g=-1),S&&g<0&&o&&o.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[r].match=d;for(var b=0,C=c;b<g;b++){var k=C.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),C=k.content}this.unplaced=S?0==e?n["Slice"].empty:new n["Slice"](L(l.content,e-1,1),e-1,g<0?l.openEnd:e-1):new n["Slice"](L(l.content,e,h),l.openStart,l.openEnd),this.placed=H(this.placed,r,n["Fragment"].from(u))},j.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!q(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;var r=this.$to,n=r.depth,o=this.$to.after(n);while(n>1&&o==this.$to.end(--n))++o;return o},j.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var r=this.frontier[e],n=r.match,o=r.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=q(t,e,o,n,i);if(a){for(var s=e-1;s>=0;s--){var l=this.frontier[s],c=l.match,p=l.type,h=q(t,s,p,c,!0);if(!h||h.childCount)continue t}return{depth:e,fit:a,move:i?t.doc.resolve(t.after(e+1)):t}}}},j.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=H(this.placed,e.depth,e.fit)),t=e.move;for(var r=e.depth+1;r<=t.depth;r++){var n=t.node(r),o=n.type.contentMatch.fillBefore(n.content,!0,t.index(r));this.openFrontierNode(n.type,n.attrs,o)}return t},j.prototype.openFrontierNode=function(t,e,r){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=H(this.placed,this.depth,n["Fragment"].from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})},j.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),e=t.match.fillBefore(n["Fragment"].empty,!0);e.childCount&&(this.placed=H(this.placed,this.frontier.length,e))},Object.defineProperties(j.prototype,W),f.prototype.replaceRange=function(t,e,r){if(!r.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(B(o,i,r))return this.step(new w(t,e,r));var a=G(o,this.doc.resolve(e));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var l=o.depth,c=o.pos-1;l>0;l--,c--){var p=o.node(l).type.spec;if(p.defining||p.isolating)break;a.indexOf(l)>-1?s=l:o.before(l)==c&&a.splice(1,0,-l)}for(var h=a.indexOf(s),u=[],f=r.openStart,d=r.content,m=0;;m++){var v=d.firstChild;if(u.push(v),m==r.openStart)break;d=v.content}f>0&&u[f-1].type.spec.defining&&o.node(h).type!=u[f-1].type?f-=1:f>=2&&u[f-1].isTextblock&&u[f-2].type.spec.defining&&o.node(h).type!=u[f-2].type&&(f-=2);for(var g=r.openStart;g>=0;g--){var y=(g+f+1)%(r.openStart+1),S=u[y];if(S)for(var b=0;b<a.length;b++){var C=a[(b+h)%a.length],k=!0;C<0&&(k=!1,C=-C);var M=o.node(C-1),$=o.index(C-1);if(M.canReplaceWith($,$,S.type,S.marks))return this.replace(o.before(C),k?i.after(C):e,new n["Slice"](X(r.content,0,r.openStart,y),y,r.openEnd))}}for(var A=this.steps.length,R=a.length-1;R>=0;R--){if(this.replace(t,e,r),this.steps.length>A)break;var N=a[R];R<0||(t=o.before(N),e=i.after(N))}return this},f.prototype.replaceRangeWith=function(t,e,r){if(!r.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=z(this.doc,t,r.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new n["Slice"](n["Fragment"].from(r),0,0))},f.prototype.deleteRange=function(t,e){for(var r=this.doc.resolve(t),n=this.doc.resolve(e),o=G(r,n),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||r.node(a).type.contentMatch.validEnd)return this.delete(r.start(a),n.end(a));if(a>0&&(s||r.node(a-1).canReplace(r.index(a-1),n.indexAfter(a-1))))return this.delete(r.before(a),n.after(a))}for(var l=1;l<=r.depth&&l<=n.depth;l++)if(t-r.start(l)==r.depth-l&&e>r.end(l)&&n.end(l)-e!=n.depth-l)return this.delete(r.before(l),e);return this.delete(t,e)}},5313:function(t,e,r){"use strict";r.r(e),r.d(e,"AllSelection",(function(){return f})),r.d(e,"EditorState",(function(){return $})),r.d(e,"NodeSelection",(function(){return h})),r.d(e,"Plugin",(function(){return x})),r.d(e,"PluginKey",(function(){return T})),r.d(e,"Selection",(function(){return a})),r.d(e,"SelectionRange",(function(){return l})),r.d(e,"TextSelection",(function(){return c})),r.d(e,"Transaction",(function(){return S}));var n=r("304a"),o=r("0ac0"),i=Object.create(null),a=function(t,e,r){this.ranges=r||[new l(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},s={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};s.anchor.get=function(){return this.$anchor.pos},s.head.get=function(){return this.$head.pos},s.from.get=function(){return this.$from.pos},s.to.get=function(){return this.$to.pos},s.$from.get=function(){return this.ranges[0].$from},s.$to.get=function(){return this.ranges[0].$to},s.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},a.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},a.prototype.replace=function(t,e){void 0===e&&(e=n["Slice"].empty);for(var r=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=r,r=r.lastChild;for(var a=t.steps.length,s=this.ranges,l=0;l<s.length;l++){var c=s[l],p=c.$from,h=c.$to,u=t.mapping.slice(a);t.replaceRange(u.map(p.pos),u.map(h.pos),l?n["Slice"].empty:e),0==l&&v(t,a,(r?r.isInline:o&&o.isTextblock)?-1:1)}},a.prototype.replaceWith=function(t,e){for(var r=t.steps.length,n=this.ranges,o=0;o<n.length;o++){var i=n[o],a=i.$from,s=i.$to,l=t.mapping.slice(r),c=l.map(a.pos),p=l.map(s.pos);o?t.deleteRange(c,p):(t.replaceRangeWith(c,p,e),v(t,r,e.isInline?-1:1))}},a.findFrom=function(t,e,r){var n=t.parent.inlineContent?new c(t):m(t.node(0),t.parent,t.pos,t.index(),e,r);if(n)return n;for(var o=t.depth-1;o>=0;o--){var i=e<0?m(t.node(0),t.node(o),t.before(o+1),t.index(o),e,r):m(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,r);if(i)return i}},a.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new f(t.node(0))},a.atStart=function(t){return m(t,t,0,0,1)||new f(t)},a.atEnd=function(t){return m(t,t,t.content.size,t.childCount,-1)||new f(t)},a.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=i[e.type];if(!r)throw new RangeError("No selection type "+e.type+" defined");return r.fromJSON(t,e)},a.jsonID=function(t,e){if(t in i)throw new RangeError("Duplicate use of selection JSON ID "+t);return i[t]=e,e.prototype.jsonID=t,e},a.prototype.getBookmark=function(){return c.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(a.prototype,s),a.prototype.visible=!0;var l=function(t,e){this.$from=t,this.$to=e},c=function(t){function e(e,r){void 0===r&&(r=e),t.call(this,e,r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={$cursor:{configurable:!0}};return r.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(r,n){var o=r.resolve(n.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=r.resolve(n.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,r){if(void 0===r&&(r=n["Slice"].empty),t.prototype.replace.call(this,e,r),r==n["Slice"].empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new p(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,r){if("number"!=typeof r.anchor||"number"!=typeof r.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(r.anchor),t.resolve(r.head))},e.create=function(t,e,r){void 0===r&&(r=e);var n=t.resolve(e);return new this(n,r==e?n:t.resolve(r))},e.between=function(r,n,o){var i=r.pos-n.pos;if(o&&!i||(o=i>=0?1:-1),!n.parent.inlineContent){var a=t.findFrom(n,o,!0)||t.findFrom(n,-o,!0);if(!a)return t.near(n,o);n=a.$head}return r.parent.inlineContent||(0==i?r=n:(r=(t.findFrom(r,-o,!0)||t.findFrom(r,o,!0)).$anchor,r.pos<n.pos!=i<0&&(r=n))),new e(r,n)},Object.defineProperties(e.prototype,r),e}(a);a.jsonID("text",c);var p=function(t,e){this.anchor=t,this.head=e};p.prototype.map=function(t){return new p(t.map(this.anchor),t.map(this.head))},p.prototype.resolve=function(t){return c.between(t.resolve(this.anchor),t.resolve(this.head))};var h=function(t){function e(e){var r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);t.call(this,e,n),this.node=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(r,n){var o=n.mapResult(this.anchor),i=o.deleted,a=o.pos,s=r.resolve(a);return i?t.near(s):new e(s)},e.prototype.content=function(){return new n["Slice"](n["Fragment"].from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new u(this.anchor)},e.fromJSON=function(t,r){if("number"!=typeof r.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(r.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(a);h.prototype.visible=!1,a.jsonID("node",h);var u=function(t){this.anchor=t};u.prototype.map=function(t){var e=t.mapResult(this.anchor),r=e.deleted,n=e.pos;return r?new p(n,n):new u(n)},u.prototype.resolve=function(t){var e=t.resolve(this.anchor),r=e.nodeAfter;return r&&h.isSelectable(r)?new h(e):a.near(e)};var f=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,r){if(void 0===r&&(r=n["Slice"].empty),r==n["Slice"].empty){e.delete(0,e.doc.content.size);var o=t.atStart(e.doc);o.eq(e.selection)||e.setSelection(o)}else t.prototype.replace.call(this,e,r)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return d},e}(a);a.jsonID("all",f);var d={map:function(){return this},resolve:function(t){return new f(t)}};function m(t,e,r,n,o,i){if(e.inlineContent)return c.create(t,r);for(var a=n-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){var s=e.child(a);if(s.isAtom){if(!i&&h.isSelectable(s))return h.create(t,r-(o<0?s.nodeSize:0))}else{var l=m(t,s,r+o,o<0?s.childCount:0,o,i);if(l)return l}r+=s.nodeSize*o}}function v(t,e,r){var n=t.steps.length-1;if(!(n<e)){var i=t.steps[n];if(i instanceof o["c"]||i instanceof o["b"]){var s,l=t.mapping.maps[n];l.forEach((function(t,e,r,n){null==s&&(s=n)})),t.setSelection(a.near(t.doc.resolve(s),r))}}}var g=1,y=2,w=4,S=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return r.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|g)&~y,this.storedMarks=null,this},r.selectionSet.get=function(){return(this.updated&g)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=y,this},e.prototype.ensureMarks=function(t){return n["Mark"].sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},r.storedMarksSet.get=function(){return(this.updated&y)>0},e.prototype.addStep=function(e,r){t.prototype.addStep.call(this,e,r),this.updated=this.updated&~y,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var r=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||n["Mark"].none))),r.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,r){void 0===r&&(r=e);var n=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(n.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,r);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=r==e?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(e,r,n.text(t,o)),this.selection.empty||this.setSelection(a.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},r.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=w,this},r.scrolledIntoView.get=function(){return(this.updated&w)>0},Object.defineProperties(e.prototype,r),e}(o["d"]);function b(t,e){return e&&t?t.bind(e):t}var C=function(t,e,r){this.name=t,this.init=b(e.init,r),this.apply=b(e.apply,r)},k=[new C("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new C("selection",{init:function(t,e){return t.selection||a.atStart(e.doc)},apply:function(t){return t.selection}}),new C("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new C("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],M=function(t,e){var r=this;this.schema=t,this.fields=k.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(r.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");r.plugins.push(t),r.pluginsByKey[t.key]=t,t.spec.state&&r.fields.push(new C(t.key,t.spec.state,t))}))},$=function(t){this.config=t},A={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};A.schema.get=function(){return this.config.schema},A.plugins.get=function(){return this.config.plugins},$.prototype.apply=function(t){return this.applyTransaction(t).state},$.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=e){var n=this.config.plugins[r];if(n.spec.filterTransaction&&!n.spec.filterTransaction.call(n,t,this))return!1}return!0},$.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],r=this.applyInner(t),n=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=n?n[i].n:0,l=n?n[i].state:this,c=s<e.length&&a.spec.appendTransaction.call(a,s?e.slice(s):e,l,r);if(c&&r.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",t),!n){n=[];for(var p=0;p<this.config.plugins.length;p++)n.push(p<i?{state:r,n:e.length}:{state:this,n:0})}e.push(c),r=r.applyInner(c),o=!0}n&&(n[i]={state:r,n:e.length})}}if(!o)return{state:r,transactions:e}}},$.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new $(this.config),r=this.config.fields,n=0;n<r.length;n++){var o=r[n];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<R.length;i++)R[i](this,t,e);return e},A.tr.get=function(){return new S(this)},$.create=function(t){for(var e=new M(t.schema||t.doc.type.schema,t.plugins),r=new $(e),n=0;n<e.fields.length;n++)r[e.fields[n].name]=e.fields[n].init(t,r);return r},$.prototype.reconfigure=function(t){for(var e=new M(t.schema||this.schema,t.plugins),r=e.fields,n=new $(e),o=0;o<r.length;o++){var i=r[o].name;n[i]=this.hasOwnProperty(i)?this[i]:r[o].init(t,n)}return n},$.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var r in t){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var n=t[r],o=n.spec.state;o&&o.toJSON&&(e[r]=o.toJSON.call(n,this[n.key]))}return e},$.fromJSON=function(t,e,r){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new M(t.schema,t.plugins),i=new $(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=n["Node"].fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=a.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var s in r){var l=r[s],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(e,s))return void(i[o.name]=c.fromJSON.call(l,t,e[s],i))}i[o.name]=o.init(t,i)}})),i},$.addApplyListener=function(t){R.push(t)},$.removeApplyListener=function(t){var e=R.indexOf(t);e>-1&&R.splice(e,1)},Object.defineProperties($.prototype,A);var R=[];function N(t,e,r){for(var n in t){var o=t[n];o instanceof Function?o=o.bind(e):"handleDOMEvents"==n&&(o=N(o,e,{})),r[n]=o}return r}var x=function(t){this.props={},t.props&&N(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:F("plugin")};x.prototype.getState=function(t){return t[this.key]};var O=Object.create(null);function F(t){return t in O?t+"$"+ ++O[t]:(O[t]=0,t+"$")}var T=function(t){void 0===t&&(t="key"),this.key=F(t)};T.prototype.get=function(t){return t.config.pluginsByKey[this.key]},T.prototype.getState=function(t){return t[this.key]}},"55be":function(t,e,r){"use strict";r.r(e),r.d(e,"CellSelection",(function(){return _})),r.d(e,"TableMap",(function(){return m})),r.d(e,"__clipCells",(function(){return X})),r.d(e,"__insertCells",(function(){return Q})),r.d(e,"__pastedCells",(function(){return K})),r.d(e,"addColumn",(function(){return vt})),r.d(e,"addColumnAfter",(function(){return yt})),r.d(e,"addColumnBefore",(function(){return gt})),r.d(e,"addRow",(function(){return Ct})),r.d(e,"addRowAfter",(function(){return Mt})),r.d(e,"addRowBefore",(function(){return kt})),r.d(e,"cellAround",(function(){return b})),r.d(e,"colCount",(function(){return O})),r.d(e,"columnResizing",(function(){return Kt})),r.d(e,"columnResizingPluginKey",(function(){return Pt})),r.d(e,"deleteColumn",(function(){return St})),r.d(e,"deleteRow",(function(){return At})),r.d(e,"deleteTable",(function(){return Wt})),r.d(e,"findCell",(function(){return x})),r.d(e,"fixTables",(function(){return ut})),r.d(e,"fixTablesKey",(function(){return pt})),r.d(e,"goToNextCell",(function(){return jt})),r.d(e,"handlePaste",(function(){return it})),r.d(e,"inSameTable",(function(){return N})),r.d(e,"isInTable",(function(){return k})),r.d(e,"mergeCells",(function(){return xt})),r.d(e,"moveCellForward",(function(){return R})),r.d(e,"nextCell",(function(){return F})),r.d(e,"removeColumn",(function(){return wt})),r.d(e,"removeRow",(function(){return $t})),r.d(e,"rowIsHeader",(function(){return bt})),r.d(e,"selectedRect",(function(){return dt})),r.d(e,"selectionCell",(function(){return M})),r.d(e,"setCellAttr",(function(){return Tt})),r.d(e,"splitCell",(function(){return Ot})),r.d(e,"splitCellWithType",(function(){return Ft})),r.d(e,"tableEditing",(function(){return ie})),r.d(e,"tableEditingKey",(function(){return S})),r.d(e,"tableNodes",(function(){return H})),r.d(e,"toggleHeader",(function(){return _t})),r.d(e,"toggleHeaderCell",(function(){return Jt})),r.d(e,"toggleHeaderColumn",(function(){return Dt})),r.d(e,"toggleHeaderRow",(function(){return It})),r.d(e,"updateColumnsOnResize",(function(){return Ht}));var n,o,i=r("5313"),a=r("304a"),s=r("7f06"),l=r("576a"),c=r("0ac0");if("undefined"!=typeof WeakMap){var p=new WeakMap;n=function(t){return p.get(t)},o=function(t,e){return p.set(t,e),e}}else{var h=[],u=10,f=0;n=function(t){for(var e=0;e<h.length;e+=2)if(h[e]==t)return h[e+1]},o=function(t,e){return f==u&&(f=0),h[f++]=t,h[f++]=e}}var d=function(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n},m=function(t,e,r,n){this.width=t,this.height=e,this.map=r,this.problems=n};function v(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=g(t),r=t.childCount,n=[],o=0,i=null,a=[],s=0,l=e*r;s<l;s++)n[s]=0;for(var c=0,p=0;c<r;c++){var h=t.child(c);p++;for(var u=0;;u++){while(o<n.length&&0!=n[o])o++;if(u==h.childCount)break;for(var f=h.child(u),d=f.attrs,v=d.colspan,w=d.rowspan,S=d.colwidth,b=0;b<w;b++){if(b+c>=r){(i||(i=[])).push({type:"overlong_rowspan",pos:p,n:w-b});break}for(var C=o+b*e,k=0;k<v;k++){0==n[C+k]?n[C+k]=p:(i||(i=[])).push({type:"collision",row:c,pos:p,n:v-k});var M=S&&S[k];if(M){var $=(C+k)%e*2,A=a[$];null==A||A!=M&&1==a[$+1]?(a[$]=M,a[$+1]=1):A==M&&a[$+1]++}}}o+=v,p+=f.nodeSize}var R=(c+1)*e,N=0;while(o<R)0==n[o++]&&N++;N&&(i||(i=[])).push({type:"missing",row:c,n:N}),p++}for(var x=new m(e,r,n,i),O=!1,F=0;!O&&F<a.length;F+=2)null!=a[F]&&a[F+1]<r&&(O=!0);return O&&y(x,a,t),x}function g(t){for(var e=-1,r=!1,n=0;n<t.childCount;n++){var o=t.child(n),i=0;if(r)for(var a=0;a<n;a++)for(var s=t.child(a),l=0;l<s.childCount;l++){var c=s.child(l);a+c.attrs.rowspan>n&&(i+=c.attrs.colspan)}for(var p=0;p<o.childCount;p++){var h=o.child(p);i+=h.attrs.colspan,h.attrs.rowspan>1&&(r=!0)}-1==e?e=i:e!=i&&(e=Math.max(e,i))}return e}function y(t,e,r){t.problems||(t.problems=[]);for(var n=0,o={};n<t.map.length;n++){var i=t.map[n];if(!o[i]){o[i]=!0;for(var a=r.nodeAt(i),s=null,l=0;l<a.attrs.colspan;l++){var c=(n+l)%t.width,p=e[2*c];null==p||a.attrs.colwidth&&a.attrs.colwidth[l]==p||((s||(s=w(a.attrs)))[l]=p)}s&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}}function w(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],r=0;r<t.colspan;r++)e.push(0);return e}m.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var r=this.map[e];if(r==t){for(var n=e%this.width,o=e/this.width|0,i=n+1,a=o+1,s=1;i<this.width&&this.map[e+s]==r;s++)i++;for(var l=1;a<this.height&&this.map[e+this.width*l]==r;l++)a++;return new d(n,o,i,a)}}throw new RangeError("No cell with offset "+t+" found")},m.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},m.prototype.nextCell=function(t,e,r){var n=this.findCell(t),o=n.left,i=n.right,a=n.top,s=n.bottom;return"horiz"==e?(r<0?0==o:i==this.width)?null:this.map[a*this.width+(r<0?o-1:i)]:(r<0?0==a:s==this.height)?null:this.map[o+this.width*(r<0?a-1:s)]},m.prototype.rectBetween=function(t,e){var r=this.findCell(t),n=r.left,o=r.right,i=r.top,a=r.bottom,s=this.findCell(e),l=s.left,c=s.right,p=s.top,h=s.bottom;return new d(Math.min(n,l),Math.min(i,p),Math.max(o,c),Math.max(a,h))},m.prototype.cellsInRect=function(t){for(var e=[],r={},n=t.top;n<t.bottom;n++)for(var o=t.left;o<t.right;o++){var i=n*this.width+o,a=this.map[i];r[a]||(r[a]=!0,o==t.left&&o&&this.map[i-1]==a||n==t.top&&n&&this.map[i-this.width]==a||e.push(a))}return e},m.prototype.positionAt=function(t,e,r){for(var n=0,o=0;;n++){var i=o+r.child(n).nodeSize;if(n==t){var a=e+t*this.width,s=(t+1)*this.width;while(a<s&&this.map[a]<o)a++;return a==s?i-1:this.map[a]}o=i}},m.get=function(t){return n(t)||o(t,v(t))};var S=new i["PluginKey"]("selectingCells");function b(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function C(t){for(var e=t.depth;e>0;e--){var r=t.node(e).type.spec.tableRole;if("cell"===r||"header_cell"===r)return t.node(e)}return null}function k(t){for(var e=t.selection.$head,r=e.depth;r>0;r--)if("row"==e.node(r).type.spec.tableRole)return!0;return!1}function M(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:b(e.$head)||$(e.$head)}function $(t){for(var e=t.nodeAfter,r=t.pos;e;e=e.firstChild,r++){var n=e.type.spec.tableRole;if("cell"==n||"header_cell"==n)return t.doc.resolve(r)}for(var o=t.nodeBefore,i=t.pos;o;o=o.lastChild,i--){var a=o.type.spec.tableRole;if("cell"==a||"header_cell"==a)return t.doc.resolve(i-o.nodeSize)}}function A(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function R(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function N(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function x(t){return m.get(t.node(-1)).findCell(t.pos-t.start(-1))}function O(t){return m.get(t.node(-1)).colCount(t.pos-t.start(-1))}function F(t,e,r){var n=t.start(-1),o=m.get(t.node(-1)),i=o.nextCell(t.pos-n,e,r);return null==i?null:t.node(0).resolve(n+i)}function T(t,e,r){var n={};for(var o in t)n[o]=t[o];return n[e]=r,n}function z(t,e,r){void 0===r&&(r=1);var n=T(t,"colspan",t.colspan-r);return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(e,r),n.colwidth.some((function(t){return t>0}))||(n.colwidth=null)),n}function E(t,e,r){void 0===r&&(r=1);var n=T(t,"colspan",t.colspan+r);if(n.colwidth){n.colwidth=n.colwidth.slice();for(var o=0;o<r;o++)n.colwidth.splice(e,0,0)}return n}var _=function(t){function e(e,r){void 0===r&&(r=e);var n=e.node(-1),o=m.get(n),a=e.start(-1),s=o.rectBetween(e.pos-a,r.pos-a),l=e.node(0),c=o.cellsInRect(s).filter((function(t){return t!=r.pos-a}));c.unshift(r.pos-a);var p=c.map((function(t){var e=n.nodeAt(t),r=t+a+1;return new i["SelectionRange"](l.resolve(r),l.resolve(r+e.content.size))}));t.call(this,p[0].$from,p[0].$to,p),this.$anchorCell=e,this.$headCell=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,r){var n=t.resolve(r.map(this.$anchorCell.pos)),o=t.resolve(r.map(this.$headCell.pos));if(A(n)&&A(o)&&N(n,o)){var a=this.$anchorCell.node(-1)!=n.node(-1);return a&&this.isRowSelection()?e.rowSelection(n,o):a&&this.isColSelection()?e.colSelection(n,o):new e(n,o)}return i["TextSelection"].between(n,o)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=m.get(t),r=this.$anchorCell.start(-1),n=e.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},i=[],s=n.top;s<n.bottom;s++){for(var l=[],c=s*e.width+n.left,p=n.left;p<n.right;p++,c++){var h=e.map[c];if(!o[h]){o[h]=!0;var u=e.findCell(h),f=t.nodeAt(h),d=n.left-u.left,v=u.right-n.right;if(d>0||v>0){var g=f.attrs;d>0&&(g=z(g,0,d)),v>0&&(g=z(g,g.colspan-v,v)),f=u.left<n.left?f.type.createAndFill(g):f.type.create(g,f.content)}if(u.top<n.top||u.bottom>n.bottom){var y=T(f.attrs,"rowspan",Math.min(u.bottom,n.bottom)-Math.max(u.top,n.top));f=u.top<n.top?f.type.createAndFill(y):f.type.create(y,f.content)}l.push(f)}}i.push(t.child(s).copy(a["Fragment"].from(l)))}var w=this.isColSelection()&&this.isRowSelection()?t:i;return new a["Slice"](a["Fragment"].from(w),1,1)},e.prototype.replace=function(e,r){void 0===r&&(r=a["Slice"].empty);for(var n=e.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],l=s.$from,c=s.$to,p=e.mapping.slice(n);e.replace(p.map(l.pos),p.map(c.pos),i?a["Slice"].empty:r)}var h=t.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);h&&e.setSelection(h)},e.prototype.replaceWith=function(t,e){this.replace(t,new a["Slice"](a["Fragment"].from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),r=m.get(e),n=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n)),i=0;i<o.length;i++)t(e.nodeAt(o[i]),n+o[i])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var r=t+this.$anchorCell.nodeAfter.attrs.rowspan,n=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,n)==this.$headCell.node(-1).childCount},e.colSelection=function(t,r){void 0===r&&(r=t);var n=m.get(t.node(-1)),o=t.start(-1),i=n.findCell(t.pos-o),a=n.findCell(r.pos-o),s=t.node(0);return i.top<=a.top?(i.top>0&&(t=s.resolve(o+n.map[i.left])),a.bottom<n.height&&(r=s.resolve(o+n.map[n.width*(n.height-1)+a.right-1]))):(a.top>0&&(r=s.resolve(o+n.map[a.left])),i.bottom<n.height&&(t=s.resolve(o+n.map[n.width*(n.height-1)+i.right-1]))),new e(t,r)},e.prototype.isRowSelection=function(){var t=m.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-e),n=t.colCount(this.$headCell.pos-e);if(Math.min(r,n)>0)return!1;var o=r+this.$anchorCell.nodeAfter.attrs.colspan,i=n+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,r){void 0===r&&(r=t);var n=m.get(t.node(-1)),o=t.start(-1),i=n.findCell(t.pos-o),a=n.findCell(r.pos-o),s=t.node(0);return i.left<=a.left?(i.left>0&&(t=s.resolve(o+n.map[i.top*n.width])),a.right<n.width&&(r=s.resolve(o+n.map[n.width*(a.top+1)-1]))):(a.left>0&&(r=s.resolve(o+n.map[a.top*n.width])),i.right<n.width&&(t=s.resolve(o+n.map[n.width*(i.top+1)-1]))),new e(t,r)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,r){return new e(t.resolve(r.anchor),t.resolve(r.head))},e.create=function(t,r,n){return void 0===n&&(n=r),new e(t.resolve(r),t.resolve(n))},e.prototype.getBookmark=function(){return new I(this.$anchorCell.pos,this.$headCell.pos)},e}(i["Selection"]);_.prototype.visible=!1,i["Selection"].jsonID("cell",_);var I=function(t,e){this.anchor=t,this.head=e};function D(t){if(!(t.selection instanceof _))return null;var e=[];return t.selection.forEachCell((function(t,r){e.push(l["a"].node(r,r+t.nodeSize,{class:"selectedCell"}))})),l["b"].create(t.doc,e)}function J(t){var e=t.$from,r=t.$to;if(e.pos==r.pos||e.pos<e.pos-6)return!1;for(var n=e.pos,o=r.pos,i=e.depth;i>=0;i--,n++)if(e.after(i+1)<e.end(i))break;for(var a=r.depth;a>=0;a--,o--)if(r.before(a+1)>r.start(a))break;return n==o&&/row|table/.test(e.node(i).type.spec.tableRole)}function B(t){for(var e,r,n=t.$from,o=t.$to,i=n.depth;i>0;i--){var a=n.node(i);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){e=a;break}}for(var s=o.depth;s>0;s--){var l=o.node(s);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){r=l;break}}return e!==r&&0===o.parentOffset}function j(t,e,r){var n,o,a=(e||t).selection,s=(e||t).doc;if(a instanceof i["NodeSelection"]&&(o=a.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)n=_.create(s,a.from);else if("row"==o){var l=s.resolve(a.from+1);n=_.rowSelection(l,l)}else if(!r){var c=m.get(a.node),p=a.from+1,h=p+c.map[c.width*c.height-1];n=_.create(s,p+1,h)}}else a instanceof i["TextSelection"]&&J(a)?n=i["TextSelection"].create(s,a.from):a instanceof i["TextSelection"]&&B(a)&&(n=i["TextSelection"].create(s,a.$from.start(),a.$from.end()));return n&&(e||(e=t.tr)).setSelection(n),e}function W(t,e){var r=t.getAttribute("data-colwidth"),n=r&&/^\d+(,\d+)*$/.test(r)?r.split(",").map((function(t){return Number(t)})):null,o=Number(t.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:n&&n.length==o?n:null};for(var a in e){var s=e[a].getFromDOM,l=s&&s(t);null!=l&&(i[a]=l)}return i}function L(t,e){var r={};for(var n in 1!=t.attrs.colspan&&(r.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(r.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(r["data-colwidth"]=t.attrs.colwidth.join(",")),e){var o=e[n].setDOMAttr;o&&o(t.attrs[n],r)}return r}function H(t){var e=t.cellAttributes||{},r={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var n in e)r[n]={default:e[n].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:r,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return W(t,e)}}],toDOM:function(t){return["td",L(t,e),0]}},table_header:{content:t.cellContent,attrs:r,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return W(t,e)}}],toDOM:function(t){return["th",L(t,e),0]}}}}function P(t){var e=t.cached.tableNodeTypes;if(!e)for(var r in e=t.cached.tableNodeTypes={},t.nodes){var n=t.nodes[r],o=n.spec.tableRole;o&&(e[o]=n)}return e}function K(t){if(!t.size)return null;var e=t.content,r=t.openStart,n=t.openEnd;while(1==e.childCount&&(r>0&&n>0||"table"==e.firstChild.type.spec.tableRole))r--,n--,e=e.firstChild.content;var o=e.firstChild,i=o.type.spec.tableRole,s=o.type.schema,l=[];if("row"==i)for(var c=0;c<e.childCount;c++){var p=e.child(c).content,h=c?0:Math.max(0,r-1),u=c<e.childCount-1?0:Math.max(0,n-1);(h||u)&&(p=V(P(s).row,new a["Slice"](p,h,u)).content),l.push(p)}else{if("cell"!=i&&"header_cell"!=i)return null;l.push(r||n?V(P(s).row,new a["Slice"](e,r,n)).content:e)}return q(s,l)}function q(t,e){for(var r=[],n=0;n<e.length;n++)for(var o=e[n],i=o.childCount-1;i>=0;i--)for(var s=o.child(i).attrs,l=s.rowspan,c=s.colspan,p=n;p<n+l;p++)r[p]=(r[p]||0)+c;for(var h=0,u=0;u<r.length;u++)h=Math.max(h,r[u]);for(var f=0;f<r.length;f++)if(f>=e.length&&e.push(a["Fragment"].empty),r[f]<h){for(var d=P(t).cell.createAndFill(),m=[],v=r[f];v<h;v++)m.push(d);e[f]=e[f].append(a["Fragment"].from(m))}return{height:e.length,width:h,rows:e}}function V(t,e){var r=t.createAndFill(),n=new c["d"](r).replace(0,r.content.size,e);return n.doc}function X(t,e,r){var n=t.width,o=t.height,i=t.rows;if(n!=e){for(var s=[],l=[],c=0;c<i.length;c++){for(var p=i[c],h=[],u=s[c]||0,f=0;u<e;f++){var d=p.child(f%p.childCount);u+d.attrs.colspan>e&&(d=d.type.create(z(d.attrs,d.attrs.colspan,u+d.attrs.colspan-e),d.content)),h.push(d),u+=d.attrs.colspan;for(var m=1;m<d.attrs.rowspan;m++)s[c+m]=(s[c+m]||0)+d.attrs.colspan}l.push(a["Fragment"].from(h))}i=l,n=e}if(o!=r){for(var v=[],g=0,y=0;g<r;g++,y++){for(var w=[],S=i[y%o],b=0;b<S.childCount;b++){var C=S.child(b);g+C.attrs.rowspan>r&&(C=C.type.create(T(C.attrs,"rowspan",r-C.attrs.rowspan),C.content)),w.push(C)}v.push(a["Fragment"].from(w))}i=v,o=r}return{width:n,height:o,rows:i}}function G(t,e,r,n,o,i,s){var l,c,p=t.doc.type.schema,h=P(p);if(o>e.width)for(var u=0,f=0;u<e.height;u++){var d=r.child(u);f+=d.nodeSize;var m=[],v=void 0;v=null==d.lastChild||d.lastChild.type==h.cell?l||(l=h.cell.createAndFill()):c||(c=h.header_cell.createAndFill());for(var g=e.width;g<o;g++)m.push(v);t.insert(t.mapping.slice(s).map(f-1+n),m)}if(i>e.height){for(var y=[],w=0,S=(e.height-1)*e.width;w<Math.max(e.width,o);w++){var b=!(w>=e.width)&&r.nodeAt(e.map[S+w]).type==h.header_cell;y.push(b?c||(c=h.header_cell.createAndFill()):l||(l=h.cell.createAndFill()))}for(var C=h.row.create(null,a["Fragment"].from(y)),k=[],M=e.height;M<i;M++)k.push(C);t.insert(t.mapping.slice(s).map(n+r.nodeSize-2),k)}return!(!l&&!c)}function U(t,e,r,n,o,i,a,s){if(0==a||a==e.height)return!1;for(var l=!1,c=o;c<i;c++){var p=a*e.width+c,h=e.map[p];if(e.map[p-e.width]==h){l=!0;var u=r.nodeAt(h),f=e.findCell(h),d=f.top,m=f.left;t.setNodeMarkup(t.mapping.slice(s).map(h+n),null,T(u.attrs,"rowspan",a-d)),t.insert(t.mapping.slice(s).map(e.positionAt(a,m,r)),u.type.createAndFill(T(u.attrs,"rowspan",d+u.attrs.rowspan-a))),c+=u.attrs.colspan-1}}return l}function Y(t,e,r,n,o,i,a,s){if(0==a||a==e.width)return!1;for(var l=!1,c=o;c<i;c++){var p=c*e.width+a,h=e.map[p];if(e.map[p-1]==h){l=!0;var u=r.nodeAt(h),f=e.colCount(h),d=t.mapping.slice(s).map(h+n);t.setNodeMarkup(d,null,z(u.attrs,a-f,u.attrs.colspan-(a-f))),t.insert(d+u.nodeSize,u.type.createAndFill(z(u.attrs,0,a-f))),c+=u.attrs.rowspan-1}}return l}function Q(t,e,r,n,o){var i=r?t.doc.nodeAt(r-1):t.doc,s=m.get(i),l=n.top,c=n.left,p=c+o.width,h=l+o.height,u=t.tr,f=0;function d(){i=r?u.doc.nodeAt(r-1):u.doc,s=m.get(i),f=u.mapping.maps.length}G(u,s,i,r,p,h,f)&&d(),U(u,s,i,r,c,p,l,f)&&d(),U(u,s,i,r,c,p,h,f)&&d(),Y(u,s,i,r,l,h,c,f)&&d(),Y(u,s,i,r,l,h,p,f)&&d();for(var v=l;v<h;v++){var g=s.positionAt(v,c,i),y=s.positionAt(v,p,i);u.replace(u.mapping.slice(f).map(g+r),u.mapping.slice(f).map(y+r),new a["Slice"](o.rows[v-l],0,0))}d(),u.setSelection(new _(u.doc.resolve(r+s.positionAt(l,c,i)),u.doc.resolve(r+s.positionAt(h-1,p-1,i)))),e(u)}I.prototype.map=function(t){return new I(t.map(this.anchor),t.map(this.head))},I.prototype.resolve=function(t){var e=t.resolve(this.anchor),r=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==r.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&r.index()<r.parent.childCount&&N(e,r)?new _(e,r):i["Selection"].near(r,1)};var Z=Object(s["a"])({ArrowLeft:et("horiz",-1),ArrowRight:et("horiz",1),ArrowUp:et("vert",-1),ArrowDown:et("vert",1),"Shift-ArrowLeft":rt("horiz",-1),"Shift-ArrowRight":rt("horiz",1),"Shift-ArrowUp":rt("vert",-1),"Shift-ArrowDown":rt("vert",1),Backspace:nt,"Mod-Backspace":nt,Delete:nt,"Mod-Delete":nt});function tt(t,e,r){return!r.eq(t.selection)&&(e&&e(t.tr.setSelection(r).scrollIntoView()),!0)}function et(t,e){return function(r,n,o){var a=r.selection;if(a instanceof _)return tt(r,n,i["Selection"].near(a.$headCell,e));if("horiz"!=t&&!a.empty)return!1;var s=st(o,t,e);if(null==s)return!1;if("horiz"==t)return tt(r,n,i["Selection"].near(r.doc.resolve(a.head+e),e));var l,c=r.doc.resolve(s),p=F(c,t,e);return l=p?i["Selection"].near(p,1):e<0?i["Selection"].near(r.doc.resolve(c.before(-1)),-1):i["Selection"].near(r.doc.resolve(c.after(-1)),1),tt(r,n,l)}}function rt(t,e){return function(r,n,o){var i=r.selection;if(!(i instanceof _)){var a=st(o,t,e);if(null==a)return!1;i=new _(r.doc.resolve(a))}var s=F(i.$headCell,t,e);return!!s&&tt(r,n,new _(i.$anchorCell,s))}}function nt(t,e){var r=t.selection;if(!(r instanceof _))return!1;if(e){var n=t.tr,o=P(t.schema).cell.createAndFill().content;r.forEachCell((function(t,e){t.content.eq(o)||n.replace(n.mapping.map(e+1),n.mapping.map(e+t.nodeSize-1),new a["Slice"](o,0,0))})),n.docChanged&&e(n)}return!0}function ot(t,e){var r=t.state.doc,n=b(r.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new _(n))),!0)}function it(t,e,r){if(!k(t.state))return!1;var n=K(r),o=t.state.selection;if(o instanceof _){n||(n={width:1,height:1,rows:[a["Fragment"].from(V(P(t.state.schema).cell,r))]});var i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),l=m.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return n=X(n,l.right-l.left,l.bottom-l.top),Q(t.state,t.dispatch,s,l,n),!0}if(n){var c=M(t.state),p=c.start(-1);return Q(t.state,t.dispatch,p,m.get(c.node(-1)).findCell(c.pos-p),n),!0}return!1}function at(t,e){if(!e.ctrlKey&&!e.metaKey){var r,n=lt(t,e.target);if(e.shiftKey&&t.state.selection instanceof _)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&n&&null!=(r=b(t.state.selection.$anchor))&&ct(t,e).pos!=r.pos)o(r,e),e.preventDefault();else if(!n)return;t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",a)}function o(e,r){var n=ct(t,r),o=null==S.getState(t.state);if(!n||!N(e,n)){if(!o)return;n=e}var i=new _(e,n);if(o||!t.state.selection.eq(i)){var a=t.state.tr.setSelection(i);o&&a.setMeta(S,e.pos),t.dispatch(a)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",a),null!=S.getState(t.state)&&t.dispatch(t.state.tr.setMeta(S,-1))}function a(r){var a,s=S.getState(t.state);if(null!=s)a=t.state.doc.resolve(s);else if(lt(t,r.target)!=n&&(a=ct(t,e),!a))return i();a&&o(a,r)}}function st(t,e,r){if(!(t.state.selection instanceof i["TextSelection"]))return null;for(var n=t.state.selection,o=n.$head,a=o.depth-1;a>=0;a--){var s=o.node(a),l=r<0?o.index(a):o.indexAfter(a);if(l!=(r<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var c=o.before(a),p="vert"==e?r>0?"down":"up":r>0?"right":"left";return t.endOfTextblock(p)?c:null}}return null}function lt(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function ct(t,e){var r=t.posAtCoords({left:e.clientX,top:e.clientY});return r&&r?b(t.state.doc.resolve(r.pos)):null}var pt=new i["PluginKey"]("fix-tables");function ht(t,e,r,n){var o=t.childCount,i=e.childCount;t:for(var a=0,s=0;a<i;a++){for(var l=e.child(a),c=s,p=Math.min(o,a+3);c<p;c++)if(t.child(c)==l){s=c+1,r+=l.nodeSize;continue t}n(l,r),s<o&&t.child(s).sameMarkup(l)?ht(t.child(s),l,r+1,n):l.nodesBetween(0,l.content.size,n,r+1),r+=l.nodeSize}}function ut(t,e){var r,n=function(e,n){"table"==e.type.spec.tableRole&&(r=ft(t,e,n,r))};return e?e.doc!=t.doc&&ht(e.doc,t.doc,0,n):t.doc.descendants(n),r}function ft(t,e,r,n){var o=m.get(e);if(!o.problems)return n;n||(n=t.tr);for(var i,a,s=[],l=0;l<o.height;l++)s.push(0);for(var c=0;c<o.problems.length;c++){var p=o.problems[c];if("collision"==p.type){for(var h=e.nodeAt(p.pos),u=0;u<h.attrs.rowspan;u++)s[p.row+u]+=p.n;n.setNodeMarkup(n.mapping.map(r+1+p.pos),null,z(h.attrs,h.attrs.colspan-p.n,p.n))}else if("missing"==p.type)s[p.row]+=p.n;else if("overlong_rowspan"==p.type){var f=e.nodeAt(p.pos);n.setNodeMarkup(n.mapping.map(r+1+p.pos),null,T(f.attrs,"rowspan",f.attrs.rowspan-p.n))}else if("colwidth mismatch"==p.type){var d=e.nodeAt(p.pos);n.setNodeMarkup(n.mapping.map(r+1+p.pos),null,T(d.attrs,"colwidth",p.colwidth))}}for(var v=0;v<s.length;v++)s[v]&&(null==i&&(i=v),a=v);for(var g=0,y=r+1;g<o.height;g++){var w=e.child(g),S=y+w.nodeSize,b=s[g];if(b>0){var C="cell";w.firstChild&&(C=w.firstChild.type.spec.tableRole);for(var k=[],M=0;M<b;M++)k.push(P(t.schema)[C].createAndFill());var $=0!=g&&i!=g-1||a!=g?S-1:y+1;n.insert(n.mapping.map($),k)}y=S}return n.setMeta(pt,{fixTables:!0})}function dt(t){var e,r=t.selection,n=M(t),o=n.node(-1),i=n.start(-1),a=m.get(o);return e=r instanceof _?a.rectBetween(r.$anchorCell.pos-i,r.$headCell.pos-i):a.findCell(n.pos-i),e.tableStart=i,e.map=a,e.table=o,e}function mt(t,e,r){for(var n=P(e.type.schema).header_cell,o=0;o<t.height;o++)if(e.nodeAt(t.map[r+o*t.width]).type!=n)return!1;return!0}function vt(t,e,r){var n=e.map,o=e.tableStart,i=e.table,a=r>0?-1:0;mt(n,i,r+a)&&(a=0==r||r==n.width?null:0);for(var s=0;s<n.height;s++){var l=s*n.width+r;if(r>0&&r<n.width&&n.map[l-1]==n.map[l]){var c=n.map[l],p=i.nodeAt(c);t.setNodeMarkup(t.mapping.map(o+c),null,E(p.attrs,r-n.colCount(c))),s+=p.attrs.rowspan-1}else{var h=null==a?P(i.type.schema).cell:i.nodeAt(n.map[l+a]).type,u=n.positionAt(s,r,i);t.insert(t.mapping.map(o+u),h.createAndFill())}}return t}function gt(t,e){if(!k(t))return!1;if(e){var r=dt(t);e(vt(t.tr,r,r.left))}return!0}function yt(t,e){if(!k(t))return!1;if(e){var r=dt(t);e(vt(t.tr,r,r.right))}return!0}function wt(t,e,r){for(var n=e.map,o=e.table,i=e.tableStart,a=t.mapping.maps.length,s=0;s<n.height;){var l=s*n.width+r,c=n.map[l],p=o.nodeAt(c);if(r>0&&n.map[l-1]==c||r<n.width-1&&n.map[l+1]==c)t.setNodeMarkup(t.mapping.slice(a).map(i+c),null,z(p.attrs,r-n.colCount(c)));else{var h=t.mapping.slice(a).map(i+c);t.delete(h,h+p.nodeSize)}s+=p.attrs.rowspan}}function St(t,e){if(!k(t))return!1;if(e){var r=dt(t),n=t.tr;if(0==r.left&&r.right==r.map.width)return!1;for(var o=r.right-1;;o--){if(wt(n,r,o),o==r.left)break;r.table=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc,r.map=m.get(r.table)}e(n)}return!0}function bt(t,e,r){for(var n=P(e.type.schema).header_cell,o=0;o<t.width;o++)if(e.nodeAt(t.map[o+r*t.width]).type!=n)return!1;return!0}function Ct(t,e,r){for(var n=e.map,o=e.tableStart,i=e.table,a=o,s=0;s<r;s++)a+=i.child(s).nodeSize;var l=[],c=r>0?-1:0;bt(n,i,r+c)&&(c=0==r||r==n.height?null:0);for(var p=0,h=n.width*r;p<n.width;p++,h++)if(r>0&&r<n.height&&n.map[h]==n.map[h-n.width]){var u=n.map[h],f=i.nodeAt(u).attrs;t.setNodeMarkup(o+u,null,T(f,"rowspan",f.rowspan+1)),p+=f.colspan-1}else{var d=null==c?P(i.type.schema).cell:i.nodeAt(n.map[h+c*n.width]).type;l.push(d.createAndFill())}return t.insert(a,P(i.type.schema).row.create(null,l)),t}function kt(t,e){if(!k(t))return!1;if(e){var r=dt(t);e(Ct(t.tr,r,r.top))}return!0}function Mt(t,e){if(!k(t))return!1;if(e){var r=dt(t);e(Ct(t.tr,r,r.bottom))}return!0}function $t(t,e,r){for(var n=e.map,o=e.table,i=e.tableStart,a=0,s=0;s<r;s++)a+=o.child(s).nodeSize;var l=a+o.child(r).nodeSize,c=t.mapping.maps.length;t.delete(a+i,l+i);for(var p=0,h=r*n.width;p<n.width;p++,h++){var u=n.map[h];if(r>0&&u==n.map[h-n.width]){var f=o.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(c).map(u+i),null,T(f,"rowspan",f.rowspan-1)),p+=f.colspan-1}else if(r<n.width&&u==n.map[h+n.width]){var d=o.nodeAt(u),m=d.type.create(T(d.attrs,"rowspan",d.attrs.rowspan-1),d.content),v=n.positionAt(r+1,p,o);t.insert(t.mapping.slice(c).map(i+v),m),p+=d.attrs.colspan-1}}}function At(t,e){if(!k(t))return!1;if(e){var r=dt(t),n=t.tr;if(0==r.top&&r.bottom==r.map.height)return!1;for(var o=r.bottom-1;;o--){if($t(n,r,o),o==r.top)break;r.table=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc,r.map=m.get(r.table)}e(n)}return!0}function Rt(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function Nt(t,e){for(var r=t.width,n=t.height,o=t.map,i=e.top*r+e.left,a=i,s=(e.bottom-1)*r+e.left,l=i+(e.right-e.left-1),c=e.top;c<e.bottom;c++){if(e.left>0&&o[a]==o[a-1]||e.right<r&&o[l]==o[l+1])return!0;a+=r,l+=r}for(var p=e.left;p<e.right;p++){if(e.top>0&&o[i]==o[i-r]||e.bottom<n&&o[s]==o[s+r])return!0;i++,s++}return!1}function xt(t,e){var r=t.selection;if(!(r instanceof _)||r.$anchorCell.pos==r.$headCell.pos)return!1;var n=dt(t),o=n.map;if(Nt(o,n))return!1;if(e){for(var i,s,l=t.tr,c={},p=a["Fragment"].empty,h=n.top;h<n.bottom;h++)for(var u=n.left;u<n.right;u++){var f=o.map[h*o.width+u],d=n.table.nodeAt(f);if(!c[f])if(c[f]=!0,null==i)i=f,s=d;else{Rt(d)||(p=p.append(d.content));var m=l.mapping.map(f+n.tableStart);l.delete(m,m+d.nodeSize)}}if(l.setNodeMarkup(i+n.tableStart,null,T(E(s.attrs,s.attrs.colspan,n.right-n.left-s.attrs.colspan),"rowspan",n.bottom-n.top)),p.size){var v=i+1+s.content.size,g=Rt(s)?i+1:v;l.replaceWith(g+n.tableStart,v+n.tableStart,p)}l.setSelection(new _(l.doc.resolve(i+n.tableStart))),e(l)}return!0}function Ot(t,e){var r=P(t.schema);return Ft((function(t){var e=t.node;return r[e.type.spec.tableRole]}))(t,e)}function Ft(t){return function(e,r){var n,o,i=e.selection;if(i instanceof _){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;n=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(n=C(i.$from),!n)return!1;o=b(i.$from).pos}if(1==n.attrs.colspan&&1==n.attrs.rowspan)return!1;if(r){var a=n.attrs,s=[],l=a.colwidth;a.rowspan>1&&(a=T(a,"rowspan",1)),a.colspan>1&&(a=T(a,"colspan",1));for(var c,p=dt(e),h=e.tr,u=0;u<p.right-p.left;u++)s.push(l?T(a,"colwidth",l&&l[u]?[l[u]]:null):a);for(var f=p.top;f<p.bottom;f++){var d=p.map.positionAt(f,p.left,p.table);f==p.top&&(d+=n.nodeSize);for(var m=p.left,v=0;m<p.right;m++,v++)m==p.left&&f==p.top||h.insert(c=h.mapping.map(d+p.tableStart,1),t({node:n,row:f,col:m}).createAndFill(s[v]))}h.setNodeMarkup(o,t({node:n,row:p.top,col:p.left}),s[0]),i instanceof _&&h.setSelection(new _(h.doc.resolve(i.$anchorCell.pos),c&&h.doc.resolve(c))),r(h)}return!0}}function Tt(t,e){return function(r,n){if(!k(r))return!1;var o=M(r);if(o.nodeAfter.attrs[t]===e)return!1;if(n){var i=r.tr;r.selection instanceof _?r.selection.forEachCell((function(r,n){r.attrs[t]!==e&&i.setNodeMarkup(n,null,T(r.attrs,t,e))})):i.setNodeMarkup(o.pos,null,T(o.nodeAfter.attrs,t,e)),n(i)}return!0}}function zt(t){return function(e,r){if(!k(e))return!1;if(r){for(var n=P(e.schema),o=dt(e),i=e.tr,a=o.map.cellsInRect("column"==t?new d(o.left,0,o.right,o.map.height):"row"==t?new d(0,o.top,o.map.width,o.bottom):o),s=a.map((function(t){return o.table.nodeAt(t)})),l=0;l<a.length;l++)s[l].type==n.header_cell&&i.setNodeMarkup(o.tableStart+a[l],n.cell,s[l].attrs);if(0==i.steps.length)for(var c=0;c<a.length;c++)i.setNodeMarkup(o.tableStart+a[c],n.header_cell,s[c].attrs);r(i)}return!0}}function Et(t,e,r){for(var n=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),o=0;o<n.length;o++){var i=e.table.nodeAt(n[o]);if(i&&i.type!==r.header_cell)return!1}return!0}function _t(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?zt(t):function(e,r){if(!k(e))return!1;if(r){var n=P(e.schema),o=dt(e),i=e.tr,a=Et("row",o,n),s=Et("column",o,n),l="column"===t?a:"row"===t&&s,c=l?1:0,p="column"==t?new d(0,c,1,o.map.height):"row"==t?new d(c,0,o.map.width,1):o,h="column"==t?s?n.cell:n.header_cell:"row"==t?a?n.cell:n.header_cell:n.cell;o.map.cellsInRect(p).forEach((function(t){var e=t+o.tableStart,r=i.doc.nodeAt(e);r&&i.setNodeMarkup(e,h,r.attrs)})),r(i)}return!0}}var It=_t("row",{useDeprecatedLogic:!0}),Dt=_t("column",{useDeprecatedLogic:!0}),Jt=_t("cell",{useDeprecatedLogic:!0});function Bt(t,e){if(e<0){var r=t.nodeBefore;if(r)return t.pos-r.nodeSize;for(var n=t.index(-1)-1,o=t.before();n>=0;n--){var i=t.node(-1).child(n);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var a=t.node(-1),s=t.indexAfter(-1),l=t.after();s<a.childCount;s++){var c=a.child(s);if(c.childCount)return l+1;l+=c.nodeSize}}}function jt(t){return function(e,r){if(!k(e))return!1;var n=Bt(M(e),t);if(null!=n){if(r){var o=e.doc.resolve(n);r(e.tr.setSelection(i["TextSelection"].between(o,R(o))).scrollIntoView())}return!0}}}function Wt(t,e){for(var r=t.selection.$anchor,n=r.depth;n>0;n--){var o=r.node(n);if("table"==o.type.spec.tableRole)return e&&e(t.tr.delete(r.before(n),r.after(n)).scrollIntoView()),!0}return!1}var Lt=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ht(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function Ht(t,e,r,n,o,i){for(var a=0,s=!0,l=e.firstChild,c=t.firstChild,p=0,h=0;p<c.childCount;p++)for(var u=c.child(p).attrs,f=u.colspan,d=u.colwidth,m=0;m<f;m++,h++){var v=o==h?i:d&&d[m],g=v?v+"px":"";a+=v||n,v||(s=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):e.appendChild(document.createElement("col")).style.width=g}while(l){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}s?(r.style.width=a+"px",r.style.minWidth=""):(r.style.width="",r.style.minWidth=a+"px")}Lt.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,Ht(t,this.colgroup,this.table,this.cellMinWidth),!0)},Lt.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var Pt=new i["PluginKey"]("tableColumnResizing");function Kt(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var r=t.cellMinWidth;void 0===r&&(r=25);var n=t.View;void 0===n&&(n=Lt);var o=t.lastColumnResizable;void 0===o&&(o=!0);var a=new i["Plugin"]({key:Pt,state:{init:function(t,e){return this.spec.props.nodeViews[P(e.schema).table.name]=function(t,e){return new n(t,r,e)},new qt(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){var e=Pt.getState(t);return e.activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,n){Vt(t,n,e,r,o)},mouseleave:function(t){Xt(t)},mousedown:function(t,e){Gt(t,e,r)}},decorations:function(t){var e=Pt.getState(t);if(e.activeHandle>-1)return oe(t,e.activeHandle)},nodeViews:{}}});return a}var qt=function(t,e){this.activeHandle=t,this.dragging=e};function Vt(t,e,r,n,o){var i=Pt.getState(t.state);if(!i.dragging){var a=Yt(e.target),s=-1;if(a){var l=a.getBoundingClientRect(),c=l.left,p=l.right;e.clientX-c<=r?s=Qt(t,e,"left"):p-e.clientX<=r&&(s=Qt(t,e,"right"))}if(s!=i.activeHandle){if(!o&&-1!==s){var h=t.state.doc.resolve(s),u=h.node(-1),f=m.get(u),d=h.start(-1),v=f.colCount(h.pos-d)+h.nodeAfter.attrs.colspan-1;if(v==f.width-1)return}te(t,s)}}}function Xt(t){var e=Pt.getState(t.state);e.activeHandle>-1&&!e.dragging&&te(t,-1)}function Gt(t,e,r){var n=Pt.getState(t.state);if(-1==n.activeHandle||n.dragging)return!1;var o=t.state.doc.nodeAt(n.activeHandle),i=Ut(t,n.activeHandle,o.attrs);function a(e){window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",s);var n=Pt.getState(t.state);n.dragging&&(ee(t,n.activeHandle,Zt(n.dragging,e,r)),t.dispatch(t.state.tr.setMeta(Pt,{setDragging:null})))}function s(e){if(!e.which)return a(e);var n=Pt.getState(t.state),o=Zt(n.dragging,e,r);re(t,n.activeHandle,o,r)}return t.dispatch(t.state.tr.setMeta(Pt,{setDragging:{startX:e.clientX,startWidth:i}})),window.addEventListener("mouseup",a),window.addEventListener("mousemove",s),e.preventDefault(),!0}function Ut(t,e,r){var n=r.colspan,o=r.colwidth,i=o&&o[o.length-1];if(i)return i;var a=t.domAtPos(e),s=a.node.childNodes[a.offset],l=s.offsetWidth,c=n;if(o)for(var p=0;p<n;p++)o[p]&&(l-=o[p],c--);return l/c}function Yt(t){while(t&&"TD"!=t.nodeName&&"TH"!=t.nodeName)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}function Qt(t,e,r){var n=t.posAtCoords({left:e.clientX,top:e.clientY}),o=n.pos,i=b(t.state.doc.resolve(o));if(!i)return-1;if("right"==r)return i.pos;var a=m.get(i.node(-1)),s=i.start(-1),l=a.map.indexOf(i.pos-s);return l%a.width==0?-1:s+a.map[l-1]}function Zt(t,e,r){var n=e.clientX-t.startX;return Math.max(r,t.startWidth+n)}function te(t,e){t.dispatch(t.state.tr.setMeta(Pt,{setHandle:e}))}function ee(t,e,r){for(var n=t.state.doc.resolve(e),o=n.node(-1),i=m.get(o),a=n.start(-1),s=i.colCount(n.pos-a)+n.nodeAfter.attrs.colspan-1,l=t.state.tr,c=0;c<i.height;c++){var p=c*i.width+s;if(!c||i.map[p]!=i.map[p-i.width]){var h=i.map[p],u=o.nodeAt(h),f=u.attrs,d=1==f.colspan?0:s-i.colCount(h);if(!f.colwidth||f.colwidth[d]!=r){var v=f.colwidth?f.colwidth.slice():ne(f.colspan);v[d]=r,l.setNodeMarkup(a+h,null,T(f,"colwidth",v))}}}l.docChanged&&t.dispatch(l)}function re(t,e,r,n){var o=t.state.doc.resolve(e),i=o.node(-1),a=o.start(-1),s=m.get(i).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1,l=t.domAtPos(o.start(-1)).node;while("TABLE"!=l.nodeName)l=l.parentNode;Ht(i,l.firstChild,l,n,s,r)}function ne(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function oe(t,e){for(var r=[],n=t.doc.resolve(e),o=n.node(-1),i=m.get(o),a=n.start(-1),s=i.colCount(n.pos-a)+n.nodeAfter.attrs.colspan,c=0;c<i.height;c++){var p=s+c*i.width-1;if((s==i.width||i.map[p]!=i.map[p+1])&&(0==c||i.map[p-1]!=i.map[p-1-i.width])){var h=i.map[p],u=a+h+o.nodeAt(h).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",r.push(l["a"].widget(u,f))}}return l["b"].create(t.doc,r)}function ie(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new i["Plugin"]({key:S,state:{init:function(){return null},apply:function(t,e){var r=t.getMeta(S);if(null!=r)return-1==r?null:r;if(null==e||!t.docChanged)return e;var n=t.mapping.mapResult(e),o=n.deleted,i=n.pos;return o?null:i}},props:{decorations:D,handleDOMEvents:{mousedown:at},createSelectionBetween:function(t){if(null!=S.getState(t.state))return t.state.selection},handleTripleClick:ot,handleKeyDown:Z,handlePaste:it},appendTransaction:function(t,r,n){return j(n,ut(n,r),e)}})}qt.prototype.apply=function(t){var e=this,r=t.getMeta(Pt);if(r&&null!=r.setHandle)return new qt(r.setHandle,null);if(r&&void 0!==r.setDragging)return new qt(e.activeHandle,r.setDragging);if(e.activeHandle>-1&&t.docChanged){var n=t.mapping.map(e.activeHandle,-1);A(t.doc.resolve(n))||(n=null),e=new qt(n,e.dragging)}return e}}}]);